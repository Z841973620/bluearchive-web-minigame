function getCookie(cname){var name = cname + "=", ca = document.cookie.split(';'); for(var i=0; i<ca.length; i++){var c = ca[i].trim(); if (c.indexOf(name)==0) return c.substring(name.length,c.length);}return "";}function setCookie(cname,cvalue){document.cookie = cname + "=" + cvalue + "; expires=Infinity";}

if(getCookie("maxScore") == ""){setCookie("maxScore","0")}

System.register("chunks:///_virtual/AchvItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,c,o,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){c=e.cclegacy,o=e._decorator,a=e.Component}],execute:function(){var s,u,l;c._RF.push({},"85457PGKa1DhIt+8f3wBgLB","AchvItem",void 0);var p=o.ccclass,f=o.property;e("default",p("AchvItem")((l=t((u=function(e){function t(){for(var t,r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return t=e.call.apply(e,[this].concat(c))||this,i(t,"key",l,n(t)),t}return r(t,e),t}(a)).prototype,"key",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=u))||s);c._RF.pop()}}}));

System.register("chunks:///_virtual/AchvPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./AchvItem.ts"],(function(e){"use strict";var t,n,o,a,r,c,s,i,u,l;return{setters:[function(e){t=e.inheritsLoose,n=e.asyncToGenerator,o=e.regeneratorRuntime,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,c=e._decorator,s=e.Component,i=e.find},function(e){u=e.default},function(e){l=e.default}],execute:function(){var p;r._RF.push({},"384c4tG4xFGPqeyiGZmz/Ih","AchvPopup",void 0);var d=c.ccclass;e("default",d("AchvPopup")(p=function(e){function r(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).onClosedCallback=null,t}t(r,e);var c=r.prototype;return c.onLoad=function(){this.updateAchvList()},c.updateAchvList=function(){var e=n(o().mark((function e(){var t,n,r,c,s,p,d,h,f;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getAchvList();case 2:t=e.sent,n=i("Popup/AchvList",this.node).children,r=0,c=a(t);case 6:if((s=c()).done){e.next=20;break}p=s.value,d=a(n);case 9:if((h=d()).done){e.next=18;break}if((f=h.value).getComponent(l).key!==p.key){e.next=16;break}return r++,i("Lock/Unlock",f).active=p.done,p.done&&window.gtag("event","Gameachievement_"+r),e.abrupt("break",18);case 16:e.next=9;break;case 18:e.next=6;break;case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.onClickCloseButton=function(){u.getAudioManager().playSFX("button"),this.onClosedCallback&&this.onClosedCallback(),this.node.destroy()},c.setOnClosedCallback=function(e){this.onClosedCallback=e},r}(s))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/api.ts",["./rollupPluginModLoBabelHelpers.js","cc","./http.ts","./crypto.ts"],(function(t){"use strict";var r,e,n,a,u;return{setters:[function(t){r=t.asyncToGenerator,e=t.regeneratorRuntime},function(t){n=t.cclegacy},function(t){a=t.request},function(t){u=t.encrypt}],execute:function(){function c(){return(c=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./maxscore.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./achv-tip.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./achv-list.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./startgame.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=r(e().mark((function t(r,n){var a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=u(JSON.stringify(n),r.substring(0,32),r.substring(32)),t.next=3,S("./gameover.json",{x:a});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./task.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=r(e().mark((function t(r){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T("/activity/halofestival2024/task-receive",{taskKey:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T("/activity/halofestival2024/all-task-receive");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./info.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./repair-sch.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./repair-global-sch.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T("/activity/halofestival2024/repair");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./latest-news.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./news.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=r(e().mark((function t(){return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("./banner.json");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}t({fetchAchvDotShow:function(){return s.apply(this,arguments)},fetchAchvList:function(){return i.apply(this,arguments)},fetchActivityInfo:function(){return v.apply(this,arguments)},fetchAllTaskAward:function(){return l.apply(this,arguments)},fetchDailyTask:function(){return f.apply(this,arguments)},fetchLatestNews:function(){return m.apply(this,arguments)},fetchNewsBanner:function(){return b.apply(this,arguments)},fetchNewsList:function(){return d.apply(this,arguments)},fetchOurSch:function(){return w.apply(this,arguments)},fetchOwnSch:function(){return y.apply(this,arguments)},fetchPlayerMaxScore:function(){return c.apply(this,arguments)},fetchRepair:function(){return x.apply(this,arguments)},fetchTaskAward:function(t){return h.apply(this,arguments)},gameOver:function(t,r){return o.apply(this,arguments)},startGame:function(){return p.apply(this,arguments)}}),n._RF.push({},"73ec5ZrWFpLPowSmoIU9w46","api",void 0);function k(t){return t}function g(t){var r=t.meta.err;return 0!==r.code&&console.log(r.msg),{data:t.data,code:r.code}}function S(t,r){return A.apply(this,arguments)}function A(){return(A=r(e().mark((function t(r,n){var u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({method:"GET",url:k(r),params:n});case 2:return u=t.sent,t.abrupt("return",g(u));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,r){return L.apply(this,arguments)}function L(){return(L=r(e().mark((function t(r,n){var u;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({method:"POST",url:k(r),body:n});case 2:return u=t.sent,t.abrupt("return",g(u));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(i){"use strict";var t,e,a,u,r,n,o,l,s,m,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,a=i.initializerDefineProperty,u=i.assertThisInitialized},function(i){r=i.cclegacy,n=i._decorator,o=i.AudioClip,l=i.AudioSource,s=i.director,m=i.Component},function(i){c=i.default}],execute:function(){var p,h,f,b,_,d,y,v,g,w,M,x,z,B,G,k,A,L,S,F,P,C,D,R,O,T,U,X,j,H,I,J,K;r._RF.push({},"9412e85Z5pPaba5LgYKiLlJ","AudioManager",void 0);var N=n.ccclass,Y=n.property;i("default",(p=N("AudioManager"),h=Y(o),f=Y(o),b=Y(o),_=Y(o),d=Y(o),y=Y(o),v=Y(o),g=Y(o),w=Y(o),M=Y(o),x=Y(o),z=Y(o),B=Y(l),G=Y(l),k=Y(l),p((S=t((L=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r))||this,a(t,"button",S,u(t)),a(t,"launch",F,u(t)),a(t,"fly",P,u(t)),a(t,"fall",C,u(t)),a(t,"hasumi",D,u(t)),a(t,"mari",R,u(t)),a(t,"noa",O,u(t)),a(t,"arisu",T,u(t)),a(t,"maki",U,u(t)),a(t,"xiaotao",X,u(t)),a(t,"up",j,u(t)),a(t,"down",H,u(t)),a(t,"mainBGM",I,u(t)),a(t,"startBGM",J,u(t)),a(t,"gameBGM",K,u(t)),t.audio_sfx=null,t.map_music=void 0,t.map_sfx=void 0,t.prev_volumn=.1,t.curr_music="",t}e(t,i);var r=t.prototype;return r.onLoad=function(){this.audio_sfx=this.node.addComponent(l),this.audio_sfx.playOnAwake=!1,this.map_music={main_bgm:this.mainBGM,start_bgm:this.startBGM,game_bgm:this.gameBGM},this.map_sfx={button:this.button,launch:this.launch,fly:this.fly,fall:this.fall,hasumi:this.hasumi,mari:this.mari,noa:this.noa,arisu:this.arisu,maki:this.maki,xiaotao:this.xiaotao,up:this.up,down:this.down},c.setAudioManager(this),s.addPersistRootNode(this.node),this.unmute(),this.playSFX("button",0)},r.playMusic=function(i,t,e){if(void 0===e&&(e=.1),i!==this.curr_music)if(this.map_music[i]){var a=this.map_music[this.curr_music];a&&a.stop(),(a=this.map_music[i]).loop=t,a.volume=this.isMuted()?0:e,a.play(),this.curr_music=i}else console.warn("Unknown music:",i);else{var u=this.map_music[this.curr_music];u.playing||(u.currentTime=0,u.volume=this.isMuted()?0:e,u.play())}},r.stopMusic=function(){var i=this.map_music[this.curr_music];i&&i.stop(),this.curr_music=""},r.pauseMusic=function(){var i=this.map_music[this.curr_music];i&&i.pause()},r.resumeMusic=function(){var i=this.map_music[this.curr_music];i&&i.play()},r.playSFX=function(i,t){void 0===t&&(t=5);var e=this.map_sfx[i];e?this.audio_sfx.playOneShot(e,t):console.warn("Unknown sfx clip:",i)},r.isMuted=function(){return 0===this.audio_sfx.volume},r.mute=function(){if(!this.isMuted())for(var i in this.prev_volumn=this.audio_sfx.volume,this.audio_sfx.volume=0,this.map_music)this.map_music[i].volume=0},r.unmute=function(){for(var i in this.audio_sfx.volume=this.prev_volumn,this.map_music)this.map_music[i].volume=this.prev_volumn},t}(m)).prototype,"button",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(L.prototype,"launch",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(L.prototype,"fly",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(L.prototype,"fall",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(L.prototype,"hasumi",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(L.prototype,"mari",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(L.prototype,"noa",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(L.prototype,"arisu",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(L.prototype,"maki",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(L.prototype,"xiaotao",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(L.prototype,"up",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(L.prototype,"down",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(L.prototype,"mainBGM",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(L.prototype,"startBGM",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(L.prototype,"gameBGM",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=L))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/AutoPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,n,e,i,r,c,u,s,p,a;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator,u=t.Animation,s=t.find,p=t.RichText,a=t.Component}],execute:function(){var l,h,f,d,m;r._RF.push({},"95fc4qUNptFILK6Y0aEaArR","AutoPopup",void 0);var A=c.ccclass,y=c.property;t("default",(l=A("AutoPopup"),h=y({type:u}),l((m=o((d=function(t){function o(){for(var o,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return o=t.call.apply(t,[this].concat(r))||this,e(o,"showAnim",m,i(o)),o}n(o,t);var r=o.prototype;return r.onLoad=function(){var t=this;this.node.active=!0,this.showAnim&&this.showAnim.on(u.EventType.FINISHED,(function(){t.onShowAnimCompleted()}))},r.onShowAnimCompleted=function(){var t=this;this.scheduleOnce((function(){t.node.destroy()}),1)},r.updateAutoText=function(t){s("Popup/Content",this.node).getComponent(p).string="<color=#394B66>"+t+"</color>"},o}(a)).prototype,"showAnim",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/BasePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,o,n,u,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,u=t.Component},function(t){s=t.default}],execute:function(){var r;o._RF.push({},"5e5427FaVxDXoppuvIIfHME","BasePopup",void 0);var a=n.ccclass;t("default",a("BasePopup")(r=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.onClickCloseButton=function(){s.getAudioManager().playSFX("button"),this.node.destroy()},o}(u))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/browser.ts",["cc"],(function(r){"use strict";var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){r("getBrowserValue",(function(r){for(var t=window.location.search.substring(1).split("&"),e=0;e<t.length;e++){var n=t[e].split("=");if(n[0]==r)return n[1]}return null})),t._RF.push({},"f72b1oYA5dJkoi/M+iII4a6","browser",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/CameraController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Player.ts","./LayerObject.ts"],(function(t){"use strict";var e,i,a,o,r,n,m,l,s,h,u,c,g,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,n=t._decorator,m=t.Camera,l=t.Node,s=t.Vec3,h=t.View,u=t.UITransform,c=t.Component},function(t){g=t.default},function(t){p=t.default},function(t){f=t.default}],execute:function(){var C,b,y,d,v,w,Z,F,G,z,M,x,H,P,_,B,D;r._RF.push({},"e0b73i+aZJFcrMDWQkhcqZk","CameraController",void 0);var L=n.ccclass,k=n.property;t("default",(C=L("CameraController"),b=k({type:m}),y=k({type:m}),d=k({type:m}),v=k({type:l}),w=k({type:p}),Z=k(s),F=k({type:[f]}),C((M=e((z=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,a(e,"bgCam",M,o(e)),a(e,"fgCam",x,o(e)),a(e,"gameCam",H,o(e)),a(e,"ground",P,o(e)),a(e,"target",_,o(e)),a(e,"offset",B,o(e)),e.init_pos=new s(0,0,0),e.gmFactor=1,a(e,"layers",D,o(e)),e.initialGameCameraZoom=void 0,e.initialFGCameraZoom=void 0,e.initialBGCameraZoom=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.init_pos.set(this.gameCam.node.getPosition()),this.gameCam&&(this.initialGameCameraZoom=this.gameCam.orthoHeight),this.fgCam&&(this.initialFGCameraZoom=this.fgCam.orthoHeight),this.bgCam&&(this.initialBGCameraZoom=this.bgCam.orthoHeight)},r.update=function(t){var e=this;if(g.isPlaying()){var i=this.target.velocity();this.move(this.gameCam.node,new s(i.x,0,0)),this.move(this.ground,new s(i.x,0,0)),this.layers.forEach((function(t){e.move(t.camera.node,new s(i.clone().multiplyScalar(t.speed_ratio).x,0,0))})),this.updateCameraZoom()}},r.move=function(t,e){t.setPosition(t.getPosition().add(e))},r.updateCameraZoom=function(){var t=h.instance.getViewportRect().height-this.target.node.getComponent(u).contentSize.height,e=this.target.node.position.y/t;this.gmFactor=Math.min(Math.max(1,e),1.5),this.gameCam&&(this.gameCam.orthoHeight=this.initialGameCameraZoom*this.gmFactor);var i=Math.min(Math.max(1,e),1.2);this.fgCam&&(this.fgCam.orthoHeight=this.initialFGCameraZoom*i);var a=Math.min(Math.max(1,e),3);this.bgCam&&(this.bgCam.orthoHeight=this.initialBGCameraZoom*a)},r.getGMFactor=function(){return this.gmFactor},e}(c)).prototype,"bgCam",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(z.prototype,"fgCam",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(z.prototype,"gameCam",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(z.prototype,"ground",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(z.prototype,"target",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(z.prototype,"offset",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(-100,0,0)}}),D=e(z.prototype,"layers",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=z))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/Catapult.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Player.ts"],(function(e){"use strict";var t,n,i,s,o,r,a,l,c,u,h,g,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.Node,l=e.Vec3,c=e.tween,u=e.Vec2,h=e.Component},function(e){g=e.default},function(e){p=e.default}],execute:function(){var f,w,y,d,T,S,v,A,D;o._RF.push({},"ed776kxSrJCJZzRnxYc2wyf","Catapult",void 0);var b=r.ccclass,x=r.property;e("default",(f=b("PressController"),w=x({type:p}),y=x({type:a}),d=x({type:a}),f((v=t((S=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"player",v,s(t)),i(t,"pointer",A,s(t)),i(t,"filler",D,s(t)),t.isSwinging=!0,t.swingSpeed=150,t.swingAngle=0,t.swingDirection=1,t.scaleTween=void 0,t.scaleDuration=.6,t}n(t,e);var o=t.prototype;return o.onLoad=function(){this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this)},o.onDestroy=function(){this.node.off(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this)},o.update=function(e){!g.isPausing()&&this.isSwinging&&this.swing(e)},o.swing=function(e){this.swingAngle+=this.swingDirection*this.swingSpeed*e,(this.swingAngle>90||this.swingAngle<0)&&(this.swingDirection*=-1,this.swingAngle=Math.max(0,Math.min(90,this.swingAngle))),this.pointer.angle=this.swingAngle},o.scaling=function(){this.filler.setScale(new l(.1,.1,.1)),this.scaleTween=c(this.filler).to(this.scaleDuration,{scale:new l(1,1,1)},{easing:"sineInOut"}).to(this.scaleDuration,{scale:new l(.1,.1,.1)},{easing:"sineInOut"}).union().repeatForever().start()},o.onTouchStart=function(){if(this.isSwinging){this.isSwinging=!1;var e=this.pointer.getRotation();this.pointer.setRotation(e),this.scaling()}},o.onTouchEnd=function(){g.getAudioManager().playSFX("launch"),this.scaleTween.stop();var e=this.filler.getScale();this.filler.setScale(e);var t=new u(0,90),n=new u(10,40),i=this.pointer.eulerAngles,s=n.x+(i.z-t.x)/(t.y-t.x)*(n.y-n.x),o=80*e.x;this.player.launch(s,o),this.node.parent.destroy()},t}(h)).prototype,"player",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(S.prototype,"pointer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(S.prototype,"filler",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/compare.ts",["cc"],(function(r){"use strict";var e;return{setters:[function(r){e=r.cclegacy}],execute:function(){r({compareArrays:function(r,e){var t=new Set(r.filter((function(r){return null!==r}))),n=new Set(e.filter((function(r){return null!==r})));return t.size===n.size&&Array.from(t).every((function(r){return n.has(r)}))},compareObjects:function r(e,t){if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e))return JSON.stringify(e.sort())===JSON.stringify(t.sort());var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var u=0,c=n;u<c.length;u++){var s=c[u];if(!r(e[s],t[s]))return!1}return!0}}),e._RF.push({},"0c5e1KgMyVDp7MsFbYMB1Ac","compare",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Config.ts",["cc"],(function(a){"use strict";var i;return{setters:[function(a){i=a.cclegacy}],execute:function(){i._RF.push({},"ece65XQikpPrJ7Y+bjczN+s","Config",void 0);a("DATA",{user_data:"user_data"}),a("OUR_PARTS",[20,40,60,80,100]),a("PLAYER_STATE",{IDLE:"idle",RISE:"rise",FALL:"fall",SLIP:"slip",DEAD:"dead",NOA:"noa",MAKI:"maki",XiaoTao:"xiaotao",OTHER:"other",SKILL:"skill"}),a("NPC_TAG",{3:"hasumi",4:"mari",5:"noa",6:"arisu",7:"maki",8:"xiaotao"}),a("TAG",{default:0,player:1,ground:2,hasumi:3,mari:4,noa:5,arisu:6,maki:7,xiaotao:8,limit:9});i._RF.pop()}}}));

System.register("chunks:///_virtual/crypto.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){t("encrypt",(function(t,r,e){var c=CryptoJS.enc.Utf8.parse(r),n=CryptoJS.enc.Utf8.parse(e);return CryptoJS.AES.encrypt(t,c,{iv:n,mode:CryptoJS.mode.CBC}).toString(CryptoJS.format.Hex)})),r._RF.push({},"dc18dwu3IRDCpnWFpjSeHQf","crypto",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/FieldController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Config.ts","./resources.ts","./FieldOKPopup.ts","./TipPopup.ts","./TaskPopup.ts","./range.ts","./AutoPopup.ts"],(function(t){"use strict";var e,n,a,r,i,o,u,p,s,c,l,d,h,g,f,m,y,C,b,w,v,k,B,S,P,F,A,T,x,M,_,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){u=t.cclegacy,p=t._decorator,s=t.Node,c=t.Prefab,l=t.resources,d=t.SpriteFrame,h=t.find,g=t.Sprite,f=t.UIOpacity,m=t.tween,y=t.director,C=t.Tween,b=t.game,w=t.instantiate,v=t.Component,k=t.Label,B=t.Button,S=t.ProgressBar},function(t){P=t.default},function(t){F=t.OUR_PARTS},function(t){A=t.loadAsync},function(t){T=t.default},function(t){x=t.default},function(t){M=t.default},function(t){_=t.countLessThan},function(t){L=t.default}],execute:function(){var O,U,I,z,N,R,X,Q,G,V,D,E,j,H,K,Y,Z;u._RF.push({},"f5ceeuuGhxL3ZEt8BdhY7yu","FieldController",void 0);var q=p.ccclass,J=p.property;t("FieldController",(O=q("FieldController"),U=J({type:s}),I=J({type:s}),z=J({type:c}),N=J({type:c}),R=J({type:c}),X=J({type:c}),Q=J({type:c}),O((D=e((V=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).isSceneBtnClicked=!1,a(e,"ownSch",D,r(e)),a(e,"ourSch",E,r(e)),a(e,"okPopup",j,r(e)),a(e,"tipPopup",H,r(e)),a(e,"autoPopup",K,r(e)),a(e,"FAQPopup",Y,r(e)),a(e,"taskPopup",Z,r(e)),e}n(e,t);var u=e.prototype;return u.start=function(){this.setAudio(),P.getAudioManager().playMusic("main_bgm",!0),this.updateView(),this.updateOwnSch(),this.updateOurSch(),window.gtag("event","Buildpage_enter")},u.setAudio=function(){P.getAudioManager().isMuted()?l.load("audio/audio_mute/spriteFrame",d,(function(t,e){h("Canvas/UILayer/TopBar/AudioBtn").getComponent(g).spriteFrame=e})):l.load("audio/audio_play/spriteFrame",d,(function(t,e){h("Canvas/UILayer/TopBar/AudioBtn").getComponent(g).spriteFrame=e}))},u.transitionOut=function(t){var e=h("Canvas/Transition").getComponent(f);e.opacity=0,m(e).to(.5,{opacity:255},{easing:"fade"}).call((function(){y.loadScene(t)})).start()},u.onClickAudioButton=function(t){P.getAudioManager().playSFX("button"),P.getAudioManager().isMuted()?(P.getAudioManager().unmute(),l.load("audio/audio_play/spriteFrame",d,(function(e,n){t.currentTarget.getComponent(g).spriteFrame=n}))):(P.getAudioManager().mute(),l.load("audio/audio_mute/spriteFrame",d,(function(e,n){t.currentTarget.getComponent(g).spriteFrame=n})))},u.onClickQuitButton=function(){P.getAudioManager().playSFX("button"),C.stopAll(),window.location.href="yostarsdk://webview_close",b.end()},u.onClickFAQButton=function(){P.getAudioManager().playSFX("button");var t=w(this.FAQPopup);this.node.parent.addChild(t)},u.onClickBackButton=function(){this.isSceneBtnClicked||(this.isSceneBtnClicked=!0,P.getAudioManager().playSFX("button"),this.transitionOut("scroll"))},u.onClickPushButton=function(){var t=i(o().mark((function t(){var e,n,a,r,i,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return P.getAudioManager().playSFX("button"),t.next=3,P.pushRepair();case 3:e=t.sent,n=w(this.okPopup),a=w(this.tipPopup),r=w(this.autoPopup),t.t0=e,t.next=0===t.t0?10:1007100===t.t0?22:1007101===t.t0?25:1007102===t.t0?28:1007103===t.t0?31:1007104===t.t0?34:102===t.t0?37:40;break;case 10:return t.next=12,P.getOwnSch();case 12:return i=t.sent,t.next=15,A("award/"+i);case 15:return u=t.sent,n.getComponent(T).updateAwardSprite(u),this.node.parent.addChild(n),this.updateView(),this.updateOwnSch(),window.gtag("event","Bulidcompletehalofestival_"+i),t.abrupt("break",42);case 22:return a.getComponent(x).updateTipText("查询数据失败，如有问题请联系客服"),this.node.parent.addChild(a),t.abrupt("break",42);case 25:return a.getComponent(x).updateTipText("老师，您的超合金建材数量不足，快去完成诺亚的每日委托领取建材吧！"),this.node.parent.addChild(a),t.abrupt("break",42);case 28:return a.getComponent(x).updateTipText("今日已经修缮过了"),this.node.parent.addChild(a),t.abrupt("break",42);case 31:return a.getComponent(x).updateTipText("全部修缮完了"),this.node.parent.addChild(a),t.abrupt("break",42);case 34:return a.getComponent(x).updateTipText("超合金材料花费失败，如有问题请联系客服"),this.node.parent.addChild(a),t.abrupt("break",42);case 37:return r.getComponent(L).updateAutoText("该活动已结束"),this.node.parent.addChild(r),t.abrupt("break",42);case 40:a.getComponent(x).updateTipText("超合金材料花费失败，如有问题请联系客服"),this.node.parent.addChild(a);case 42:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.onClickGainButton=function(){P.getAudioManager().playSFX("button");var t=w(this.taskPopup);t.getComponent(M).setOnSucceedCallback(this.updateView),this.node.parent.addChild(t)},u.updateView=function(){var t=i(o().mark((function t(){var e,n,a,r,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getActivityInfo();case 2:return e=t.sent,n=e.alloy,a=e.isRepair,t.next=7,A("push/push_btn");case 7:return r=t.sent,t.next=10,A("push/push_not");case 10:i=t.sent,h("Canvas/UILayer/AlloyBar/Amount").getComponent(k).string=n,h("Canvas/UILayer/FuncBar/PushBtn").getComponent(g).spriteFrame=a?r:i,h("Canvas/UILayer/FuncBar/PushBtn").getComponent(B).interactable=a,h("Canvas/UILayer/FuncBar/PushBtn/Up").active=a,h("Canvas/UILayer/FuncBar/PushBtn/Not").active=!a;case 16:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u.updateOwnSch=function(){var t=i(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getOwnSch();case 2:if(e=t.sent,!(this.ownSch.children.length<e)){t.next=5;break}return t.abrupt("return");case 5:this.ownSch.children.slice(0,e).forEach((function(t){t.getChildByName("Lock").active=!1,t.getChildByName("UnLock").active=!0}));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.updateOurSch=function(){var t=i(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.getOurSch();case 2:if(e=t.sent,this.ourSch.getChildByName("Progress").getComponent(S).progress=e/100,n=_(F,e),!(this.ourSch.getChildByName("Parts").children.length<n)){t.next=7;break}return t.abrupt("return");case 7:this.ourSch.getChildByName("Parts").children.slice(0,n).forEach((function(t){t.getChildByName("Mask").active=!0}));case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(v)).prototype,"ownSch",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(V.prototype,"ourSch",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(V.prototype,"okPopup",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(V.prototype,"tipPopup",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(V.prototype,"autoPopup",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(V.prototype,"FAQPopup",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(V.prototype,"taskPopup",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=V))||G));u._RF.pop()}}}));

System.register("chunks:///_virtual/FieldOKPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,o,n,r,i,u,p;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.find,i=t.Sprite,u=t.Component},function(t){p=t.default}],execute:function(){var a;o._RF.push({},"5f7ef9M+P9JRpUGkf5648Oa","FieldOKPopup",void 0);var c=n.ccclass;t("default",c("FieldOKPopup")(a=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.onClickCloseButton=function(){p.getAudioManager().playSFX("button"),this.node.destroy()},n.updateAwardSprite=function(t){r("Popup/Award/Box/Icon",this.node).getComponent(i).spriteFrame=t},o}(u))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/format.ts",["cc"],(function(t){"use strict";var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){t("convertSecondsToMMSS",(function(t){if(t<0)return"00:00";var r=Math.floor(t/60),n=t%60,c=r.toString().padStart(2,"0"),e=n.toString().padStart(2,"0");return c+":"+e})),r._RF.push({},"b36553bgcdMdbMX3fN96mIA","format",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./GameSettlePopup.ts"],(function(e){"use strict";var t,n,a,i,o,r,u,s,c,l,p,d,g,f,m,y,h,v,C,A,S,b,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){u=e.cclegacy,s=e._decorator,c=e.Prefab,l=e.view,p=e.resources,d=e.SpriteFrame,g=e.find,f=e.Sprite,m=e.UIOpacity,y=e.tween,h=e.director,v=e.Tween,C=e.game,A=e.instantiate,S=e.Component},function(e){b=e.default},function(e){w=e.default}],execute:function(){var B,P,F,M,k,_,G;u._RF.push({},"243b2fslABIM4YuOhm0k4pQ","GameController",void 0);var z=s.ccclass,T=s.property;e("default",(B=z("GameController"),P=T({type:c}),F=T({type:c}),B((_=t((k=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).isSceneBtnClicked=!1,a(t,"pausePopup",_,i(t)),a(t,"settlePopup",G,i(t)),t}n(t,e);var u=t.prototype;return u.onLoad=function(){b.initGame()},u.start=function(){var e=this;this.setAudio(),b.getAudioManager().playMusic("game_bgm",!0),l.on("canvas-resize",this.onCanvasResize,this),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&b.isPlaying()&&e.onClickPauseButton()}))},u.onDestroy=function(){l.off("canvas-resize",this.onCanvasResize,this)},u.setAudio=function(){b.getAudioManager().isMuted()?p.load("audio/audio_mute/spriteFrame",d,(function(e,t){g("Canvas/UILayer/TopBar/AudioBtn").getComponent(f).spriteFrame=t})):p.load("audio/audio_play/spriteFrame",d,(function(e,t){g("Canvas/UILayer/TopBar/AudioBtn").getComponent(f).spriteFrame=t}))},u.transitionOut=function(e){var t=g("Canvas/Transition").getComponent(m);t.opacity=0,y(t).to(.5,{opacity:255},{easing:"fade"}).call((function(){h.loadScene(e)})).start()},u.onCanvasResize=function(){b.isPlaying()&&this.onClickPauseButton()},u.onClickAudioButton=function(e){b.getAudioManager().playSFX("button"),b.getAudioManager().isMuted()?(b.getAudioManager().unmute(),p.load("audio/audio_play/spriteFrame",d,(function(t,n){e.currentTarget.getComponent(f).spriteFrame=n}))):(b.getAudioManager().mute(),p.load("audio/audio_mute/spriteFrame",d,(function(t,n){e.currentTarget.getComponent(f).spriteFrame=n})))},u.onClickQuitButton=function(){b.getAudioManager().playSFX("button"),v.stopAll(),window.location.href="yostarsdk://webview_close",C.end()},u.onClickBackButton=function(){this.isSceneBtnClicked||(this.isSceneBtnClicked=!0,b.getAudioManager().playSFX("button"),this.transitionOut("start"))},u.onClickPauseButton=function(){b.getAudioManager().playSFX("button"),b.pause();var e=A(this.pausePopup);this.node.parent.addChild(e)},u.handleGameOver=function(){var e=o(r().mark((function e(){var t,n,a,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.gameOver(),e.next=3,b.callGameOver();case 3:t=e.sent,n=t.data,a=t.code,i=A(this.settlePopup),o=b.getPlayerScore(),i.getComponent(w).updateSettleScore(o.x),i.getComponent(w).updateSettleContent(a,n.allSend,n.awardIndex,n.sendAward),this.node.parent.addChild(i),window.gtag("event","Game_complete");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(S)).prototype,"pausePopup",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(k.prototype,"settlePopup",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=k))||M));u._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./api.ts","./browser.ts","./Config.ts"],(function(t){"use strict";var e,r,n,a,i,s,u,c,o,p,l,h,f,_,m,d,v,y,g,w,x,k,A,P,S;return{setters:[function(t){e=t.inheritsLoose,r=t.asyncToGenerator,n=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,s=t.game,u=t.sys,c=t.Component},function(t){o=t.startGame,p=t.gameOver,l=t.fetchPlayerMaxScore,h=t.fetchAchvDotShow,f=t.fetchAchvList,_=t.fetchDailyTask,m=t.fetchTaskAward,d=t.fetchAllTaskAward,v=t.fetchActivityInfo,y=t.fetchOwnSch,g=t.fetchRepair,w=t.fetchOurSch,x=t.fetchLatestNews,k=t.fetchNewsList,A=t.fetchNewsBanner},function(t){P=t.getBrowserValue},function(t){S=t.DATA}],execute:function(){var b;a._RF.push({},"31fd5O9yBNLgrPVo9MCwTuT","GameManager",void 0);var T=i.ccclass;i.property;function D(t){Object.keys(t).forEach((function(e){t[e]=0}))}var C=T("GameManager")(b=function(t){function a(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).is_user_activated=!1,e.audio_manager_inst=void 0,e.server_cipher_info="",e.server_max_limit=9999999,e.player_map_position=null,e.camera_map_position=null,e.player_max_distance=0,e.player_cur_distance=0,e.player_cur_maxheight=0,e.player_drop_npcs={hasumi:0,mari:0,noa:0,arisu:0,maki:0,xiaotao:0},e.arisu_fail_npcs={hasumi:0,mari:0,noa:0,arisu:0,maki:0,xiaotao:0},e.skill_up_times=0,e.skill_down_times=0,e.is_playing=!1,e.is_pausing=!1,e.pause_start_time=0,e.pause_total_time=0,e}e(a,t);var i=a.prototype;return i.getAudioManager=function(){return this.audio_manager_inst},i.setAudioManager=function(t){this.audio_manager_inst=t},i.initialize=function(){s.frameRate=59,this.saveUserData(),console.log("当前的URL: ",window.location.href)},i.saveUserData=function(){var t=P("data");console.log("当前的DATA: ",t),t?u.localStorage.setItem(S.user_data,t):u.localStorage.removeItem(S.user_data)},i.isExistUserData=function(){return!!u.localStorage.getItem(S.user_data)},i.getUserActivated=function(){return this.is_user_activated},i.userActivate=function(){this.is_user_activated=!0},i.initGame=function(){console.log("== GAME INIT =="),this.player_cur_distance=0,this.player_cur_maxheight=0,this.skill_down_times=0,this.skill_down_times=0,D(this.player_drop_npcs),D(this.arisu_fail_npcs),this.pause_start_time=0,this.pause_total_time=0,this.is_playing=!0,this.is_pausing=!1},i.callStartGame=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:e=t.sent,r=e.data,this.server_cipher_info=r.x;case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.startGame=function(){var t=r(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("== GAME START =="),t.next=3,this.callStartGame();case 3:this.player_cur_distance=0,this.player_cur_maxheight=0,this.skill_down_times=0,this.skill_down_times=0,D(this.player_drop_npcs),D(this.arisu_fail_npcs),this.pause_start_time=0,this.pause_total_time=0,this.is_playing=!0,this.is_pausing=!1;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.callGameOver=function(){var t=r(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={flyX:this.player_cur_distance,flyY:this.player_cur_maxheight,bufferRole:this.getPlayerDropNPCs(),aliceBuferRole:this.getArisuFailNPCs(),xiangBufferCnt:this.skill_up_times,geyuanBufferCnt:this.skill_down_times},t.next=3,p(this.server_cipher_info,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.gameOver=function(){console.log("== GAME OVER =="),this.is_playing=!1,this.is_pausing=!1},i.isPlaying=function(){return this.is_playing},i.isPausing=function(){return this.is_pausing},i.pause=function(){this.is_playing=!1,this.is_pausing=!0,this.pause_start_time=Date.now()},i.resume=function(){this.is_playing=!0,this.is_pausing=!1,this.pause_total_time+=Date.now()-this.pause_start_time},i.setPlayerDropNPCs=function(t,e){void 0===e&&(e=1),this.player_drop_npcs.hasOwnProperty(t)&&(this.player_drop_npcs[t]+=e)},i.getPlayerDropNPCs=function(){var t=this;return Object.keys(this.player_drop_npcs).map((function(e){return t.player_drop_npcs[e]}))},i.setArisuFailNPCs=function(t,e){void 0===e&&(e=1),this.arisu_fail_npcs.hasOwnProperty(t)&&(this.arisu_fail_npcs[t]=e)},i.getArisuFailNPCs=function(){var t=this;return Object.keys(this.arisu_fail_npcs).map((function(e){return t.arisu_fail_npcs[e]}))},i.setSkillUpTimes=function(t){void 0===t&&(t=1),this.skill_up_times+=t},i.getSkillUpTimes=function(){return this.skill_up_times},i.setSkillDownTimes=function(t){void 0===t&&(t=1),this.skill_down_times+=t},i.getSkillDownTimes=function(){return this.skill_down_times},i.setPlayerScore=function(t,e){this.player_cur_distance=Math.min(t,this.server_max_limit),this.player_cur_maxheight=e;if(getCookie("maxScore") < this.player_cur_distance){setCookie("maxScore",this.player_cur_distance)}},i.getPlayerScore=function(){return{x:this.player_cur_distance,y:this.player_cur_maxheight}},i.getPlayerMaxScore=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l();case 2:return e=t.sent,r=e.data,this.player_max_distance=getCookie("maxScore"),t.abrupt("return",this.player_max_distance);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.getAchvDotIsShow=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return e=t.sent,r=e.data,t.abrupt("return",r.achvTipShow);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getAchvList=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return e=t.sent,r=e.data,t.abrupt("return",r.achvList);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getDailyTask=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_();case 2:return e=t.sent,r=e.data,t.abrupt("return",{dailyList:r.dailyTask,isAllFinished:r.allFinished});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getTaskAward=function(){var t=r(n().mark((function t(e){var r,a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:return r=t.sent,a=r.code,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i.getAllTaskAward=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:return e=t.sent,r=e.code,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.loadPlayerPosition=function(){return this.player_map_position},i.savePlayerPosition=function(t){this.player_map_position=t},i.loadCameraPosition=function(){return this.camera_map_position},i.saveCameraPosition=function(t){this.camera_map_position=t},i.getActivityInfo=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:return e=t.sent,r=e.data,t.abrupt("return",{isFirst:r.todayFirstEnter,alloy:r.alloyCnt,isRepair:r.repairEnable,isSend:r.newsSendAward});case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getOwnSch=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:return e=t.sent,r=e.data,t.abrupt("return",r.sch);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.pushRepair=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:return(e=t.sent).data,r=e.code,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getOurSch=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:return e=t.sent,r=e.data,t.abrupt("return",r.sch);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getLatestNews=function(){var t=r(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getNewsList=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k();case 2:return e=t.sent,r=e.data,t.abrupt("return",r.news);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),i.getNewsBanner=function(){var t=r(n().mark((function t(){var e,r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:return e=t.sent,r=e.data,t.abrupt("return",r.banner);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a}(c))||b;t("default",new C);a._RF.pop()}}}));

System.register("chunks:///_virtual/GamePausePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var n,e,o,i,a,r,u,s,l,c,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,u=t.Animation,s=t.Tween,l=t.director,c=t.Component},function(t){p=t.default}],execute:function(){var d,m,h,g,y;a._RF.push({},"78a651UANpCFr3M7bO75BJI","GamePausePopup",void 0);var f=r.ccclass,C=r.property;t("default",(d=f("GamePausePopup"),m=C(u),d((y=n((g=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return n=t.call.apply(t,[this].concat(a))||this,o(n,"down_animation",y,i(n)),n.resumeFlag=!1,n}e(n,t);var a=n.prototype;return a.onClickContinueButton=function(){var t=this;this.resumeFlag||(this.resumeFlag=!0,p.getAudioManager().playSFX("button"),this.node.getChildByName("Popup").active=!1,this.node.getChildByName("CountDown").active=!0,this.down_animation&&(this.down_animation.play("count_down"),this.down_animation.on(u.EventType.FINISHED,(function(){t.onCountDownAnimationComplete()}))))},a.onCountDownAnimationComplete=function(){p.resume(),this.resumeFlag=!1,this.node.destroy()},a.onClickRestartButton=function(){p.getAudioManager().playSFX("button"),s.stopAll(),l.loadScene("game"),this.node.destroy()},a.onClickReturnButton=function(){p.getAudioManager().playSFX("button"),s.stopAll(),l.loadScene("start"),this.node.destroy()},n}(c)).prototype,"down_animation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=g))||h));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameSettlePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./resources.ts"],(function(t){"use strict";var e,r,n,o,a,i,p,u,c,s,l,d,g,f,v,b,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){p=t.cclegacy,u=t._decorator,c=t.SpriteFrame,s=t.Tween,l=t.director,d=t.find,g=t.Label,f=t.Component,v=t.Sprite},function(t){b=t.default},function(t){h=t.loadAsync}],execute:function(){var m,S,y,k,P;p._RF.push({},"e9506Rw2U1LWoTltigFnl4j","GameSettlePopup",void 0);var w=u.ccclass,A=u.property;t("default",(m=w("GameSettlePopup"),S=A({type:c}),m((P=e((k=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,n(e,"allSprite",P,o(e)),e}r(e,t);var p=e.prototype;return p.onClickRestartButton=function(){b.getAudioManager().playSFX("button"),s.stopAll(),l.loadScene("game"),this.node.destroy()},p.onClickReturnButton=function(){b.getAudioManager().playSFX("button"),s.stopAll(),l.loadScene("start"),this.node.destroy()},p.updateSettleScore=function(t){d("Popup/Settle/Score",this.node).getComponent(g).string=t+"米"},p.updateSettleContent=function(){var t=a(i().mark((function t(e,r,n,o){var a,p,u,c,s,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=d("Popup/Award",this.node),p=d("Popup/Award/Box/Icon",this.node).getComponent(v),u=d("Popup/Award/Box/Get",this.node),c=d("Popup/Award/Tip",this.node).getComponent(g),s=d("Popup/Error",this.node),t.t0=e,t.next=0===t.t0?8:101===t.t0?22:102===t.t0?26:30;break;case 8:if(!r){t.next=13;break}return c.string="活动奖励全部领取！",p.spriteFrame=this.allSprite,u.active=!0,t.abrupt("break",34);case 13:return c.string=o?"奖励已成功发送到游戏中邮箱！":"今天奖励已领取！",t.next=16,h("settle/"+n);case 16:return(l=t.sent)&&(p.spriteFrame=l),u.active=!o,s.active=!1,a.active=!0,t.abrupt("break",34);case 22:return s.getComponent(g).string="活动未开始",s.active=!0,a.active=!1,t.abrupt("break",34);case 26:return s.getComponent(g).string="活动已结束",s.active=!0,a.active=!1,t.abrupt("break",34);case 30:return s.getComponent(g).string="游戏结算失败，如有问题请咨询客服",s.active=!0,a.active=!1,t.abrupt("break",34);case 34:case"end":return t.stop()}}),t,this)})));return function(e,r,n,o){return t.apply(this,arguments)}}(),e}(f)).prototype,"allSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=k))||y));p._RF.pop()}}}));

System.register("chunks:///_virtual/http.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts"],(function(e){"use strict";var t,r,n,s,a;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,s=e.sys},function(e){a=e.DATA}],execute:function(){e("request",(function(e){return o.apply(this,arguments)})),n._RF.push({},"2af5359Hi9M5I1HVAulUbdd","http",void 0);function o(){return(o=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n,o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.DONE)if(o.status>=200&&o.status<300)try{var t=JSON.parse(o.responseText);e(t)}catch(e){console.error(o.responseText),r(new Error("Invalid response body: failed to parse json"))}else 401==o.status||403==o.status?s.localStorage.removeItem(a.user_data):r(new Error("Failed to request (status="+o.status+")"))},o.ontimeout=function(){r(new Error("Timeout"))},t.params){var u=[];for(var i in t.params)u.push(i+"="+t.params[i]);var c=u.join("&");-1===t.url.indexOf("?")?t.url+="?"+c:t.url+="&"+c}o.timeout=5e3,o.open(t.method,t.url),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("Authorization",null!=(n=s.localStorage.getItem(a.user_data))?n:""),o.withCredentials=!0,o.send(t.body?JSON.stringify(t.body):null)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n._RF.pop()}}}));

System.register("chunks:///_virtual/LayerObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var i,e,r,a,n,s,o,c,p,h,u,l,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,o=t.Camera,c=t.CCFloat,p=t.Node,h=t.View,u=t.UITransform,l=t.Component},function(t){f=t.default}],execute:function(){var d,P,g,y,m,b,v,w,R;n._RF.push({},"8779eYwQiVMjLpeGFwDlreQ","LayerObject",void 0);var W=s.ccclass,x=s.property;t("default",(d=W("LayerObject"),P=x({type:o}),g=x(c),y=x({type:[p]}),d((v=i((b=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,r(i,"camera",v,a(i)),r(i,"speed_ratio",w,a(i)),r(i,"Parts",R,a(i)),i.partWidth=0,i}e(i,t);var n=i.prototype;return n.getViewWidth=function(){return h.instance.getViewportRect().width},n.start=function(){this.partWidth=this.Parts[0].getComponent(u).width;for(var t=0;t<this.Parts.length;t++)this.Parts[t].setPosition(t*this.partWidth,this.Parts[t].position.y)},n.update=function(t){f.isPlaying()&&this.checkAndResetParts()},n.checkAndResetParts=function(){for(var t=0;t<this.Parts.length;t++){var i=this.Parts[t];if(i.position.x+this.partWidth<=this.camera.node.position.x-2*this.getViewWidth()){var e=this.getRightmostPart();i.setPosition(e.position.x+this.partWidth,i.position.y)}}},n.getRightmostPart=function(){for(var t=this.Parts[0],i=1;i<this.Parts.length;i++)this.Parts[i].position.x>t.position.x&&(t=this.Parts[i]);return t},i}(l)).prototype,"camera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(b.prototype,"speed_ratio",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=i(b.prototype,"Parts",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=b))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./FieldController.ts","./FieldOKPopup.ts","./CameraController.ts","./Catapult.ts","./GameController.ts","./GamePausePopup.ts","./GameSettlePopup.ts","./LayerObject.ts","./NPCManager.ts","./NPCObject.ts","./Player.ts","./SkillDown.ts","./SkillUp.ts","./UILayer.ts","./MainController.ts","./SplashController.ts","./AudioManager.ts","./AutoPopup.ts","./BasePopup.ts","./Config.ts","./GameManager.ts","./TipPopup.ts","./api.ts","./http.ts","./NewsController.ts","./NewsItem.ts","./NewsPopup.ts","./NewsSlider.ts","./Map.ts","./NewestPopup.ts","./ScrollController.ts","./TaskItem.ts","./TaskPopup.ts","./AchvItem.ts","./AchvPopup.ts","./StartController.ts","./browser.ts","./compare.ts","./crypto.ts","./format.ts","./random.ts","./range.ts","./resources.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./TipPopup.ts"],(function(t){"use strict";var e,n,i,o,a,r,u,s,p,c,l,d,g,f,m,y,C,h,M,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,u=t.Prefab,s=t.director,p=t.resources,c=t.SpriteFrame,l=t.find,d=t.Sprite,g=t.UIOpacity,f=t.tween,m=t.instantiate,y=t.Tween,C=t.game,h=t.Component},function(t){M=t.default},function(t){A=t.default}],execute:function(){var S,F,v,B,b;a._RF.push({},"8813aSBtOJPyqg9yt347sdU","MainController",void 0);var w=r.ccclass,P=r.property;t("MainController",(S=w("MainController"),F=P({type:u}),S((b=e((B=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).isSceneBtnClicked=!1,i(e,"tipPopup",b,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){M.initialize(),this.setAudio(),M.getAudioManager().playMusic("main_bgm",!0),s.preloadScene("scroll",(function(){console.log("scroll scene preloaded")}))},a.setAudio=function(){M.getAudioManager().isMuted()?p.load("audio/audio_mute/spriteFrame",c,(function(t,e){l("Canvas/UILayer/TopBar/AudioBtn").getComponent(d).spriteFrame=e})):p.load("audio/audio_play/spriteFrame",c,(function(t,e){l("Canvas/UILayer/TopBar/AudioBtn").getComponent(d).spriteFrame=e}))},a.transitionOut=function(t){var e=l("Canvas/Transition").getComponent(g);e.opacity=0,f(e).to(.5,{opacity:255},{easing:"fade"}).call((function(){s.loadScene(t)})).start()},a.onClickEnterButton=function(){this.isSceneBtnClicked||(this.isSceneBtnClicked=!0,M.getAudioManager().playSFX("button"),M.isExistUserData()?this.transitionOut("scroll"):(this.tipPopupShow(),this.isSceneBtnClicked=!1))},a.tipPopupShow=function(){var t=m(this.tipPopup);t.getComponent(A).updateTipText("登录信息已失效，请返回App重新登录"),this.node.parent.addChild(t)},a.onClickAudioButton=function(t){M.getAudioManager().playSFX("button"),M.getAudioManager().isMuted()?(M.getAudioManager().unmute(),p.load("audio/audio_play/spriteFrame",c,(function(e,n){t.currentTarget.getComponent(d).spriteFrame=n}))):(M.getAudioManager().mute(),p.load("audio/audio_mute/spriteFrame",c,(function(e,n){t.currentTarget.getComponent(d).spriteFrame=n})))},a.onClickQuitButton=function(){M.getAudioManager().playSFX("button"),y.stopAll(),window.location.href="yostarsdk://webview_close",C.end()},e}(h)).prototype,"tipPopup",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=B))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./range.ts","./ScrollController.ts","./AutoPopup.ts"],(function(t){"use strict";var i,e,n,o,a,r,s,l,p,h,u,c,d,y,f,m,g,w,C,_,k,P,b,v,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.Camera,p=t.Prefab,h=t.SpriteFrame,u=t.Vec3,c=t.Animation,d=t.Sprite,y=t.Vec2,f=t.UITransform,m=t.view,g=t.tween,w=t.find,C=t.Tween,_=t.instantiate,k=t.Component},function(t){P=t.default},function(t){b=t.limitValue},function(t){v=t.default},function(t){S=t.default}],execute:function(){var A,x,z,T,M,B,N,W,F,V,L,D,E;a._RF.push({},"a726bVqOmFEwIbW+3kb1NIl","Map",void 0);var R=r.ccclass,I=r.property;t("default",(A=R("Map"),x=I({type:s}),z=I({type:l}),T=I({type:p}),M=I({type:h}),B=I({type:h}),A((F=i((W=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return i=t.call.apply(t,[this].concat(a))||this,n(i,"player",F,o(i)),n(i,"followCamera",V,o(i)),n(i,"autoPopup",L,o(i)),n(i,"standRightSprite",D,o(i)),n(i,"standLeftSprite",E,o(i)),i.walkAnimation=null,i.speed=400,i.is_touch=!0,i.cur_is_right=!0,i.init_cam=new u(0,0,1e3),i.init_pos=new u(280,240,0),i.safety_range=408,i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.node.on(s.EventType.TOUCH_END,this.onClickMap,this)},a.onDestroy=function(){this.node.off(s.EventType.TOUCH_END,this.onClickMap,this)},a.start=function(){this.initAnimation(),this.initPosition()},a.initPosition=function(){var t=P.loadPlayerPosition(),i=P.loadCameraPosition();t&&i?(this.player.setPosition(t.x,this.init_pos.y),this.followCamera.node.setPosition(i.x,this.init_cam.y)):(this.player.setPosition(this.init_pos),this.followCamera.node.setPosition(this.init_cam))},a.initAnimation=function(){this.walkAnimation=this.player.getComponent(c),this.cur_is_right?this.walkAnimation.play("player_walk_right"):this.walkAnimation.play("player_walk_left"),this.walkAnimation.pause(),this.updateStopSprite()},a.updateStopSprite=function(){this.player.getComponent(d).spriteFrame=this.cur_is_right?this.standRightSprite:this.standLeftSprite},a.updateWalkAnim=function(t){this.cur_is_right!=t?t?this.walkAnimation.play("player_walk_right"):this.walkAnimation.play("player_walk_left"):this.walkAnimation.resume(),this.cur_is_right=t},a.movePlayer=function(t,i){var e=this,n=this.player.position,o=this.followCamera.node.position,a=Math.abs(t.x-n.x)/this.speed,r=b(t.x,new y(this.player.getComponent(f).width/2,this.node.getChildByName("Background").getComponent(f).width-this.player.getComponent(f).width/2-this.safety_range)),s=new u(r,n.y,n.z),l=o.x+m.getVisibleSize().width/2-n.x,p=o.x+s.x-n.x,h=b(p-l,new y(0,this.node.getChildByName("Background").getComponent(f).width-m.getVisibleSize().width-this.safety_range)),c=new u(h,o.y,o.z);g(this.player).to(a,{position:s}).call((function(){e.walkAnimation.pause(),e.updateStopSprite(),i&&(P.savePlayerPosition(e.player.getPosition()),w("Canvas/ScrollCtrl").getComponent(v).goScene(i))})).start(),g(this.followCamera.node).to(a,{position:c}).call((function(){i&&P.saveCameraPosition(e.followCamera.node.getPosition())})).start()},a.onClickMap=function(t){if(this.is_touch){P.getAudioManager().playSFX("button"),C.stopAll();var i=t.getLocation(),e=new u(i.x,i.y,0),n=this.screenToWorld(e);this.player&&this.followCamera.node&&(n.x>this.player.position.x?this.updateWalkAnim(!0):this.updateWalkAnim(!1),this.movePlayer(n))}},a.onClickTargetButton=function(t,i){if(this.is_touch){P.getAudioManager().playSFX("button"),C.stopAll(),this.is_touch=!1;var e=t.target.position;this.player&&this.followCamera.node&&(e.x>this.player.position.x?this.updateWalkAnim(!0):this.updateWalkAnim(!1),this.movePlayer(e,i))}},a.screenToWorld=function(t){var i=new u;return this.followCamera.screenToWorld(t,i),i},a.getMapTouch=function(){return this.is_touch},a.saveFastBtnPosition=function(t){var i=w(""+t,this.node).position,e=this.player.position,n=this.followCamera.node.position,o=b(i.x,new y(this.player.getComponent(f).width/2,this.node.getChildByName("Background").getComponent(f).width-this.player.getComponent(f).width/2-this.safety_range)),a=new u(o,e.y,e.z),r=n.x+m.getVisibleSize().width/2-e.x,s=n.x+a.x-e.x,l=b(s-r,new y(0,this.node.getChildByName("Background").getComponent(f).width-m.getVisibleSize().width-this.safety_range)),p=new u(l,n.y,n.z);P.savePlayerPosition(a),P.saveCameraPosition(p)},a.handleNotStarted=function(){var t=_(this.autoPopup);t.getComponent(S).updateAutoText("该活动未开始"),this.node.parent.addChild(t)},i}(k)).prototype,"player",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(W.prototype,"followCamera",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(W.prototype,"autoPopup",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(W.prototype,"standRightSprite",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(W.prototype,"standLeftSprite",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=W))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/NewestPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,o,n,i,u,r,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.find,u=t.Label,r=t.RichText,s=t.Component},function(t){c=t.default}],execute:function(){var p;o._RF.push({},"31d80DmBQZIf4JLq/+W8i3E","NewestPopup",void 0);var a=n.ccclass;t("default",a("NewestPopup")(p=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.onClickCloseButton=function(){c.getAudioManager().playSFX("button"),this.node.destroy()},n.start=function(){window.gtag("event","News_window")},n.updateNewsTitle=function(t){i("Popup/ScrollView/view/Article/Title",this.node).getComponent(u).string=""+t},n.updateNewsText=function(t){i("Popup/ScrollView/view/Article/Content",this.node).getComponent(r).string="<color=#394B66>"+t+"</color>"},n.updateBottomBar=function(t,e){i("Popup/LikeBar/Like/Name",this.node).getComponent(u).string=e,i("Popup/Tip",this.node).active=t,i("Popup/LikeBar",this.node).active=!t},o}(s))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/NewsController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./NewsItem.ts"],(function(e){"use strict";var t,n,i,o,r,a,s,u,c,l,p,d,g,f,m,w,y,C,h,v,A,b,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,u=e._decorator,c=e.Node,l=e.Prefab,p=e.resources,d=e.SpriteFrame,g=e.find,f=e.Sprite,m=e.UIOpacity,w=e.tween,y=e.director,C=e.Tween,h=e.game,v=e.Component,A=e.instantiate},function(e){b=e.default},function(e){M=e.default}],execute:function(){var F,B,L,N,_,k,S;s._RF.push({},"d32fbMg50RDMboj+9NwXyhA","NewsController",void 0);var T=u.ccclass,I=u.property;e("NewsController",(F=T("NewsController"),B=I({type:c}),L=I({type:l}),F((k=t((_=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).isSceneBtnClicked=!1,i(t,"newsList",k,o(t)),i(t,"newsItem",S,o(t)),t}n(t,e);var s=t.prototype;return s.start=function(){this.setAudio(),b.getAudioManager().playMusic("main_bgm",!0),this.updateNewsList(),window.gtag("event","Newspage_enter")},s.setAudio=function(){b.getAudioManager().isMuted()?p.load("audio/audio_mute/spriteFrame",d,(function(e,t){g("Canvas/UILayer/TopBar/AudioBtn").getComponent(f).spriteFrame=t})):p.load("audio/audio_play/spriteFrame",d,(function(e,t){g("Canvas/UILayer/TopBar/AudioBtn").getComponent(f).spriteFrame=t}))},s.transitionOut=function(e){var t=g("Canvas/Transition").getComponent(m);t.opacity=0,w(t).to(.5,{opacity:255},{easing:"fade"}).call((function(){y.loadScene(e)})).start()},s.onClickAudioButton=function(e){b.getAudioManager().playSFX("button"),b.getAudioManager().isMuted()?(b.getAudioManager().unmute(),p.load("audio/audio_play/spriteFrame",d,(function(t,n){e.currentTarget.getComponent(f).spriteFrame=n}))):(b.getAudioManager().mute(),p.load("audio/audio_mute/spriteFrame",d,(function(t,n){e.currentTarget.getComponent(f).spriteFrame=n})))},s.onClickQuitButton=function(){b.getAudioManager().playSFX("button"),C.stopAll(),window.location.href="yostarsdk://webview_close",h.end()},s.onClickBackButton=function(){this.isSceneBtnClicked||(this.isSceneBtnClicked=!0,b.getAudioManager().playSFX("button"),this.transitionOut("scroll"))},s.updateNewsList=function(){var e=r(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.newsList.removeAllChildren(),e.next=3,b.getNewsList();case 3:(t=e.sent).length>0&&t.forEach((function(e){var t=A(n.newsItem);t.getComponent(M).updateTitle(e.summary,e.title),t.getComponent(M).updateContent(e.id,e.content,e.role),n.newsList.addChild(t)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(v)).prototype,"newsList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(_.prototype,"newsItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=_))||N));s._RF.pop()}}}));

System.register("chunks:///_virtual/NewsItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./NewsPopup.ts"],(function(t){"use strict";var e,i,n,r,o,a,l,u,s,c,p,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,l=t.Prefab,u=t.Label,s=t.instantiate,c=t.find,p=t.Component},function(t){f=t.default},function(t){d=t.default}],execute:function(){var g,h,b,m,y,w,C,v,N;o._RF.push({},"4fc5dJyXgRPK7rMMVP93gVZ","NewsItem",void 0);var z=a.ccclass,D=a.property;t("default",(g=z("NewsItem"),h=D({type:l}),g((y=e((m=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"id",y,r(e)),n(e,"title",w,r(e)),n(e,"content",C,r(e)),n(e,"role",v,r(e)),n(e,"newsDetail",N,r(e)),e}i(e,t);var o=e.prototype;return o.updateTitle=function(t,e){this.title=e,this.node.getChildByName("Summary").getComponent(u).string=t,this.node.getChildByName("Caption").getComponent(u).string=e},o.updateContent=function(t,e,i){this.id=t,this.content=e,this.role=i},o.onClickNewsItem=function(){f.getAudioManager().playSFX("button");var t=s(this.newsDetail);t.getComponent(d).updateNewsDetail(this.id,this.title,this.content,this.role),c("Canvas").addChild(t)},e}(p)).prototype,"id",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=e(m.prototype,"title",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),C=e(m.prototype,"content",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=e(m.prototype,"role",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=e(m.prototype,"newsDetail",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=m))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/NewsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(e){"use strict";var t,i,o,n,r,a,c,s,p,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.find,s=e.Label,p=e.RichText,l=e.Component},function(e){u=e.default}],execute:function(){var d,f,g;r._RF.push({},"7696eaWI41MYpPIfJre5Lbe","NewsPopup",void 0);var h=a.ccclass,y=a.property;e("default",h("NewsPopup")((g=t((f=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"id",g,n(t)),t}i(t,e);var r=t.prototype;return r.onClickCloseButton=function(){u.getAudioManager().playSFX("button"),this.node.destroy()},r.updateNewsDetail=function(e,t,i,o){this.id=e,c("Popup/ScrollView/view/Article/Title",this.node).getComponent(s).string=""+t,c("Popup/ScrollView/view/Article/Content",this.node).getComponent(p).string="<color=#394B66>"+i+"</color>",c("Popup/LikeBar/Like/Name",this.node).getComponent(s).string=o,this.node.active=!0},t}(l)).prototype,"id",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=f))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/NewsSlider.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./resources.ts"],(function(n){"use strict";var e,t,r,s,o,a,i,u,c;return{setters:[function(n){e=n.inheritsLoose,t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){s=n.cclegacy,o=n._decorator,a=n.Component,i=n.Sprite},function(n){u=n.default},function(n){c=n.loadUrl}],execute:function(){var d;s._RF.push({},"6d463O9VYdOtaST4OxT5j5G","NewsSlider",void 0);var h=o.ccclass;n("default",h("NewsSlider")(d=function(n){function s(){for(var e,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(e=n.call.apply(n,[this].concat(r))||this).bannersSorted=[],e.currentIndex=0,e}e(s,n);var o=s.prototype;return o.onLoad=function(){this.loadNewsBanners()},o.loadNewsBanners=function(){var n=t(r().mark((function n(){var e;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.getNewsBanner();case 2:e=n.sent,this.bannersSorted=e.sort((function(n,e){return n.id-e.id})),this.showBannerAtIndex(this.currentIndex);case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),o.showBannerAtIndex=function(){var n=t(r().mark((function n(e){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=(e+this.bannersSorted.length)%this.bannersSorted.length,!this.bannersSorted[e]){n.next=7;break}return n.next=4,c(this.bannersSorted[e].url);case 4:t=n.sent,this.node.getChildByName("Card").getComponent(i).spriteFrame=t,this.currentIndex=e;case 7:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),o.onClickNextButton=function(){u.getAudioManager().playSFX("button"),this.showBannerAtIndex(this.currentIndex-1)},o.onClickPrevButton=function(){u.getAudioManager().playSFX("button"),this.showBannerAtIndex(this.currentIndex+1)},s}(a))||d);s._RF.pop()}}}));

System.register("chunks:///_virtual/NPCManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(i){"use strict";var n,t,e,a,o,s,r,l,c,h,p,u,P,d;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,r=i.Camera,l=i.Prefab,c=i.Animation,h=i.View,p=i.instantiate,u=i.Vec3,P=i.Component},function(i){d=i.default}],execute:function(){var f,g,N,m,C,v,y,b,A;o._RF.push({},"e7d44vT8tFP8oaKiepMKxT+","NPCManager",void 0);var I=s.ccclass,w=s.property;i("default",(f=I("NPCManager"),g=w({type:r}),N=w({type:[l]}),m=w({type:c}),f((y=n((v=function(i){function n(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return n=i.call.apply(i,[this].concat(o))||this,e(n,"gameCam",y,a(n)),e(n,"npcPrefabs",b,a(n)),e(n,"invalidAnim",A,a(n)),n.lastPositions={},n.npcPool=[],n.npcNode=[],n.npcSpacing=1500,n.minNumBetweenSameNPC=3,n.initialNPCCount=10,n.isNPCInvalid=!1,n}t(n,i);var o=n.prototype;return o.onLoad=function(){for(var i=0;i<this.npcPrefabs.length;i++)this.lastPositions[i]=-1/0},o.start=function(){this.generateInitialNPCs()},o.update=function(i){d.isPlaying()?(this.invalidAnim.resume(),this.checkAndGenerateNPCs()):this.invalidAnim.pause()},o.generateInitialNPCs=function(){for(var i=this.gameCam.node.position.x+2*h.instance.getViewportRect().width,n=0;n<this.initialNPCCount;n++)this.generateNextNPC(i+n*this.npcSpacing)},o.checkAndGenerateNPCs=function(){var i=this.gameCam.node.position.x+h.instance.getViewportRect().width/2,n=this.npcPool.length>0?this.npcPool[this.npcPool.length-1]:0;n<i&&this.generateNextNPC(n+this.npcSpacing)},o.generateNextNPC=function(i){var n=this.chooseNPCType(),t=p(this.npcPrefabs[n]);(t.setPosition(new u(i,-200,0)),this.node.addChild(t),this.npcNode.push(t),this.npcPool.push(t.position.x),this.lastPositions[n]=this.npcPool.length-1,this.npcNode.length>this.initialNPCCount)&&this.npcNode.shift().destroy()},o.chooseNPCType=function(){for(var i=[],n=0;n<this.npcPrefabs.length;n++)this.npcPool.length-this.lastPositions[n]>this.minNumBetweenSameNPC&&i.push(n);return i[Math.floor(Math.random()*i.length)]},o.setNPCInvalid=function(i){this.isNPCInvalid=i},o.getNPCInvalid=function(){return this.isNPCInvalid},o.handleArisuInvalid=function(){var i=this;this.invalidAnim.play("arisu_in"),this.invalidAnim.on(c.EventType.FINISHED,(function(){i.invalidAnim.off(c.EventType.FINISHED),i.invalidAnim.play("arisu_out")}))},n}(P)).prototype,"gameCam",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=n(v.prototype,"npcPrefabs",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=n(v.prototype,"invalidAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=v))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/NPCObject.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Config.ts","./Player.ts","./NPCManager.ts"],(function(e){"use strict";var t,n,i,o,a,r,c,s,l,p,d,g,u,C,h,S,y,m,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,c=e.Node,s=e.PolygonCollider2D,l=e.Contact2DType,p=e.sp,d=e.RigidBody2D,g=e.Vec2,u=e.Component},function(e){C=e.default},function(e){h=e.TAG,S=e.NPC_TAG,y=e.PLAYER_STATE},function(e){m=e.default},function(e){v=e.default}],execute:function(){var f,N,A,M,P,b,w;a._RF.push({},"36bb60CJ7RI/JFTKR92oo97","NPCObject",void 0);var I=r.ccclass,T=r.property;e("default",(f=I("NPCObject"),N=T(c),A=T(c),f((b=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"npcSpriteNode",b,o(t)),i(t,"npcSpineNode",w,o(t)),t.npcCollider=null,t.isCollided=!1,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.npcCollider=this.node.getComponent(s),this.npcCollider&&this.npcCollider.on(l.BEGIN_CONTACT,this.onBeginContact,this)},a.onDestroy=function(){this.npcCollider&&this.npcCollider.off(l.BEGIN_CONTACT,this.onBeginContact,this)},a.onBeginContact=function(e,t){var n=this;if(t.tag===h.player&&!this.isCollided){if(this.isCollided=!0,e.tag!==h.arisu&&this.node.parent.getComponent(v).getNPCInvalid())return this.node.parent.getComponent(v).setNPCInvalid(!1),this.node.parent.getComponent(v).handleArisuInvalid(),void C.setArisuFailNPCs(S[e.tag]);C.setPlayerDropNPCs(S[e.tag]);var i=this.npcSpineNode.getComponent(p.Skeleton),o=t.node.getComponent(d),a=o.linearVelocity;switch(e.tag){case h.hasumi:C.getAudioManager().playSFX("hasumi"),t.node.getComponent(m).setState(y.OTHER),o.linearVelocity=new g(0,0),o.gravityScale=0,this.npcSpriteNode.active=!1,this.npcSpineNode.active=!0,i.setAnimation(0,"action",!1),i.setCompleteListener((function(){t.node.getComponent(m).setState(y.RISE),o.linearVelocity=new g(Math.max(30,1.2*a.x),Math.max(30,1.2*a.y)),o.gravityScale=2}));break;case h.mari:C.getAudioManager().playSFX("mari"),t.node.getComponent(m).setState(y.OTHER),o.linearVelocity=new g(0,0),o.gravityScale=0,this.npcSpriteNode.active=!1,this.npcSpineNode.active=!0,i.setAnimation(0,"action",!1),i.setCompleteListener((function(){var e=Math.atan2(a.y,a.x)*(180/Math.PI),n=Math.max(30,Math.min(e+20,90)),i=Math.sqrt(a.x*a.x+a.y*a.y),r=n*(Math.PI/180),c=new g(i*Math.cos(r),i*Math.sin(r));t.node.getComponent(m).setState(y.RISE),o.linearVelocity=c,o.gravityScale=2}));break;case h.noa:C.getAudioManager().playSFX("noa"),t.node.getComponent(m).setState(y.NOA),o.linearVelocity=new g(0,0),o.gravityScale=0,this.npcSpriteNode.active=!1,this.npcSpineNode.active=!0,i.setAnimation(0,"action",!1),i.setCompleteListener((function(){t.node.getComponent(m).setState(y.RISE),o.linearVelocity=new g(.8*a.x,.8*a.y),o.gravityScale=2}));break;case h.arisu:C.getAudioManager().playSFX("arisu"),t.node.getComponent(m).setState(y.OTHER),o.linearVelocity=new g(0,0),o.gravityScale=0,this.npcSpriteNode.active=!1,this.npcSpineNode.active=!0,i.setAnimation(0,"action",!1),i.setCompleteListener((function(){n.node.parent.getComponent(v).setNPCInvalid(!0),t.node.getComponent(m).setState(y.RISE),o.linearVelocity=new g(a.x,a.y),o.gravityScale=2}));break;case h.maki:C.getAudioManager().playSFX("maki"),t.node.getComponent(m).setState(y.MAKI),o.linearVelocity=new g(.7*a.x,0),this.npcSpriteNode.active=!1,this.npcSpineNode.active=!0,i.setAnimation(0,"action",!1);break;case h.xiaotao:C.getAudioManager().playSFX("xiaotao"),t.node.getComponent(m).setState(y.XiaoTao),o.linearVelocity=new g(0,0),this.scheduleOnce((function(){t.node.getComponent(m).setViewActive(!1),n.npcSpriteNode.active=!1,n.npcSpineNode.active=!0,i.setAnimation(0,"action",!1),i.setCompleteListener((function(){t.node.getComponent(m).setState(y.DEAD)}))}),1)}}},t}(u)).prototype,"npcSpriteNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(P.prototype,"npcSpineNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=P))||M));a._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Config.ts","./GameManager.ts","./GameController.ts"],(function(e){"use strict";var t,i,n,r,a,o,l,s,p,c,h,u,d,y,S,g,f,b,m,v,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,s=e.SpriteFrame,p=e.Vec3,c=e.RigidBody2D,h=e.BoxCollider2D,u=e.Contact2DType,d=e.Sprite,y=e.v3,S=e.Vec2,g=e.find,f=e.Component},function(e){b=e.PLAYER_STATE,m=e.TAG},function(e){v=e.default},function(e){L=e.default}],execute:function(){var w,C,B,I,A,F,P,D,E,x,N,k,M,R,V,z,T,G,_,O,X,U,K;a._RF.push({},"e1704LixVZFJZJUxlTo0n3n","Player",void 0);var Y=o.ccclass,H=o.property;e("default",(w=Y("Player"),C=H({type:L}),B=H({type:l}),I=H({type:s}),A=H({type:s}),F=H({type:s}),P=H({type:s}),D=H({type:s}),E=H({type:s}),x=H({type:s}),N=H({type:s}),w((R=t((M=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"gameCtrl",R,r(t)),n(t,"viewNode",V,r(t)),n(t,"idleSprite",z,r(t)),n(t,"flySprite",T,r(t)),n(t,"slidSprite",G,r(t)),n(t,"deadSprite",_,r(t)),n(t,"noahSprite",O,r(t)),n(t,"makiSprite",X,r(t)),n(t,"xiaotaoSprite",U,r(t)),n(t,"otherSprite",K,r(t)),t.playerState=b.IDLE,t.collider=void 0,t.rigidBody=void 0,t.prevPos=new p(0,0,0),t.slideFriction=.98,t.minBounceSpeed=20,t.bounceSpeedLossX=.9,t.bounceSpeedLossY=.7,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.rigidBody=this.node.getComponent(c),this.collider=this.node.getComponent(h),this.collider&&this.collider.on(u.BEGIN_CONTACT,this.onBeginContact,this)},a.onDestroy=function(){this.collider&&this.collider.off(u.BEGIN_CONTACT,this.onBeginContact,this)},a.start=function(){this.setState(b.IDLE),this.prevPos=this.node.getPosition(),this.setViewActive(!0)},a.setViewActive=function(e){this.viewNode.active=e},a.getState=function(){return this.playerState},a.setState=function(e){this.playerState=e,this.updatePlayerSkin(),this.playerState===b.DEAD&&(this.gameCtrl.handleGameOver(),v.getAudioManager().playSFX("fall"))},a.updatePlayerSkin=function(){switch(this.playerState){case b.IDLE:this.viewNode.getComponent(d).spriteFrame=this.idleSprite;break;case b.RISE:case b.FALL:this.viewNode.getComponent(d).spriteFrame=this.flySprite;break;case b.SLIP:this.viewNode.getComponent(d).spriteFrame=this.slidSprite;break;case b.DEAD:this.viewNode.getComponent(d).spriteFrame=this.deadSprite;break;case b.NOA:this.viewNode.getComponent(d).spriteFrame=this.noahSprite;break;case b.MAKI:this.viewNode.getComponent(d).spriteFrame=this.makiSprite;break;case b.XiaoTao:this.viewNode.getComponent(d).spriteFrame=this.xiaotaoSprite;break;case b.OTHER:case b.SKILL:this.viewNode.getComponent(d).spriteFrame=this.otherSprite}},a.launch=function(e,t){v.startGame(),this.setState(b.RISE);var i=e*(Math.PI/180),n=y(t*Math.cos(i),t*Math.sin(i)*.8,0);this.rigidBody.linearVelocity=new S(n.x,n.y),this.scheduleOnce((function(){v.getAudioManager().playSFX("fly")}),1),g("Canvas/UILayer/SkillUpBtn").active=!0,g("Canvas/UILayer/SkillDownBtn").active=!0},a.velocity=function(){return this.node.getPosition().subtract(this.prevPos)},a.update=function(e){if(v.isPlaying()){if(this.rigidBody.enabled=!0,this.prevPos=this.node.getPosition(),this.playerState!==b.SLIP&&this.playerState!==b.MAKI||this.handleSliding(e),this.playerState===b.RISE||this.playerState===b.FALL){var t=this.rigidBody.linearVelocity.y;t>0&&this.playerState!==b.RISE?this.setState(b.RISE):t<=0&&this.playerState!==b.FALL&&this.setState(b.FALL)}this.updateRotation()}else this.rigidBody.enabled=!1},a.updateRotation=function(){var e=this.rigidBody.linearVelocity;this.playerState===b.RISE?this.node.angle=Math.atan2(e.y,e.x)*(30/Math.PI):this.playerState===b.FALL&&(this.node.angle=Math.atan2(e.y,e.x)*(10/Math.PI))},a.onBeginContact=function(e,t){if(t.tag===m.ground&&this.playerState===b.FALL){var i=this.rigidBody.linearVelocity;if(i.x>0)Math.sqrt(i.x*i.x+i.y*i.y)<=this.minBounceSpeed?this.startSliding(Math.abs(i.x)):(this.setState(b.RISE),this.rigidBody.linearVelocity=new S(i.x*this.bounceSpeedLossX,-i.y*this.bounceSpeedLossY));else this.setState(b.DEAD)}},a.startSliding=function(e){this.setState(b.SLIP),this.rigidBody.linearVelocity=new S(e,0)},a.handleSliding=function(e){this.rigidBody.linearVelocity.x*=this.slideFriction,this.rigidBody.linearVelocity.x<1&&(this.rigidBody.linearVelocity.x=0,this.setState(b.DEAD))},t}(f)).prototype,"gameCtrl",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(M.prototype,"viewNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(M.prototype,"idleSprite",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(M.prototype,"flySprite",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(M.prototype,"slidSprite",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(M.prototype,"deadSprite",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(M.prototype,"noahSprite",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(M.prototype,"makiSprite",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(M.prototype,"xiaotaoSprite",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(M.prototype,"otherSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=M))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/random.ts",["cc"],(function(r){"use strict";var n;return{setters:[function(r){n=r.cclegacy}],execute:function(){r({getRandomUniqueElements:function(r,n){if(n<1||n>r.length)throw new Error("Count must be more 1, and not greater than the array length.");var t=r.slice(),e=[];for(;e.length<n;){var a=Math.floor(Math.random()*t.length);e.push(t[a]),t.splice(a,1)}return e},randomInt:function(r,n){void 0===n&&(n=!1);var t=r.x,e=r.y;if(t>e){var a=[e,t];t=a[0],e=a[1]}n&&e++;return t+Math.random()*(e-t)>>0},randomRang:function(r){var n=r.x,t=r.y;if(n>t){var e=[t,n];n=e[0],t=e[1]}return n+Math.random()*(t-n)}}),n._RF.push({},"23563PPk95MUaMVKqA7r+lK","random",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/range.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t({countLessThan:function(t,n){for(var e=0,r=0;r<t.length&&t[r]<=n;r++)e++;return e},limitValue:function(t,n){return t<n.x?n.x:t>n.y?n.y:t}}),n._RF.push({},"b5bb0+YV7VD5LN11jL86k1D","range",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/resources.ts",["cc"],(function(e){"use strict";var r,n,t,u,c;return{setters:[function(e){r=e.cclegacy,n=e.resources,t=e.SpriteFrame,u=e.assetManager,c=e.Texture2D}],execute:function(){e({loadAsync:function(e){return new Promise((function(r,u){n.load(e+"/spriteFrame",t,(function(e,n){e&&u(e),r(n)}))}))},loadUrl:function(e){return new Promise((function(r,n){u.loadRemote(e,(function(e,u){e&&n(e);var o=new t,s=new c;s.image=u,o.texture=s,r(o)}))}))}}),r._RF.push({},"77e92dWJ6FEB6ATplb259IF","resources",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./NewestPopup.ts","./Map.ts","./AutoPopup.ts"],(function(t){"use strict";var e,n,o,i,a,r,u,s,p,l,c,d,g,f,h,m,C,y,w,M,F,b,A,B,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){u=t.cclegacy,s=t._decorator,p=t.Node,l=t.Prefab,c=t.director,d=t.resources,g=t.SpriteFrame,f=t.find,h=t.Sprite,m=t.UIOpacity,C=t.tween,y=t.Tween,w=t.game,M=t.instantiate,F=t.Component},function(t){b=t.default},function(t){A=t.default},function(t){B=t.default},function(t){S=t.default}],execute:function(){var k,v,P,T,N,_,z,x,X,I,L,O,Q;u._RF.push({},"e8624ZzcehFy4jpgBPZ42K7","ScrollController",void 0);var D=s.ccclass,G=s.property;t("default",(k=D("ScrollController"),v=G({type:p}),P=G({type:l}),T=G({type:l}),N=G({type:l}),_=G({type:l}),k((X=e((x=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).isStartBtnClicked=!1,e.isNewsBtnClicked=!1,o(e,"Map",X,i(e)),o(e,"newestPopup",I,i(e)),o(e,"taskPopup",L,i(e)),o(e,"FAQPopup",O,i(e)),o(e,"autoPopup",Q,i(e)),e}n(e,t);var u=e.prototype;return u.start=function(){this.setAudio(),b.getAudioManager().playMusic("main_bgm",!0),this.handleFirstNews(),["field","start","news"].forEach((function(t){c.preloadScene(t,(function(){console.log(t+" scene preloaded")}))}))},u.setAudio=function(){b.getAudioManager().isMuted()?d.load("audio/audio_mute/spriteFrame",g,(function(t,e){f("Canvas/UILayer/TopBar/AudioBtn").getComponent(h).spriteFrame=e})):d.load("audio/audio_play/spriteFrame",g,(function(t,e){f("Canvas/UILayer/TopBar/AudioBtn").getComponent(h).spriteFrame=e}))},u.transitionOut=function(t){var e=f("Canvas/Transition").getComponent(m);e.opacity=0,C(e).to(.5,{opacity:255},{easing:"fade"}).call((function(){c.loadScene(t)})).start()},u.onClickAudioButton=function(t){b.getAudioManager().playSFX("button"),b.getAudioManager().isMuted()?(b.getAudioManager().unmute(),d.load("audio/audio_play/spriteFrame",g,(function(e,n){t.currentTarget.getComponent(h).spriteFrame=n}))):(b.getAudioManager().mute(),d.load("audio/audio_mute/spriteFrame",g,(function(e,n){t.currentTarget.getComponent(h).spriteFrame=n})))},u.onClickQuitButton=function(){b.getAudioManager().playSFX("button"),y.stopAll(),window.location.href="yostarsdk://webview_close",w.end()},u.onClickFAQButton=function(){if(this.Map.getComponent(B).getMapTouch()){b.getAudioManager().playSFX("button");var t=M(this.FAQPopup);this.node.parent.addChild(t)}},u.onClickSwitchStartButton=function(){this.Map.getComponent(B).getMapTouch()&&(this.Map.getComponent(B).saveFastBtnPosition("GameBtn"),this.isStartBtnClicked||(this.isStartBtnClicked=!0,b.getAudioManager().playSFX("button"),this.transitionOut("start")))},u.onClickSwitchNewsButton=function(){this.Map.getComponent(B).getMapTouch()&&(this.Map.getComponent(B).saveFastBtnPosition("NewsBtn"),this.isNewsBtnClicked||(this.isNewsBtnClicked=!0,b.getAudioManager().playSFX("button"),this.transitionOut("news")))},u.goScene=function(t){t&&this.transitionOut(t)},u.handleFirstNews=function(){var t=a(r().mark((function t(){var e,n,o,i,a,u,s,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getActivityInfo();case 2:if(e=t.sent,n=e.isFirst,o=e.isSend,!n){t.next=13;break}return t.next=8,b.getLatestNews();case 8:i=t.sent,a=i.code,u=i.data,102===a&&((s=M(this.autoPopup)).getComponent(S).updateAutoText("该活动已结束"),this.node.parent.addChild(s)),0===a&&((p=M(this.newestPopup)).getComponent(A).updateNewsTitle("【"+u.news.title+"】"),p.getComponent(A).updateNewsText(""+u.news.content),p.getComponent(A).updateBottomBar(o,u.news.role),this.node.parent.addChild(p));case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.onClickTaskButton=function(){if(this.Map.getComponent(B).getMapTouch()){b.getAudioManager().playSFX("button");var t=M(this.taskPopup);this.node.parent.addChild(t)}},e}(F)).prototype,"Map",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(x.prototype,"newestPopup",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(x.prototype,"taskPopup",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(x.prototype,"FAQPopup",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(x.prototype,"autoPopup",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=x))||z));u._RF.pop()}}}));

System.register("chunks:///_virtual/SkillDown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Config.ts","./UILayer.ts","./Player.ts"],(function(t){"use strict";var e,i,o,n,a,r,s,l,c,h,u,d,p,g,m,y,f,w,S,C,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.Prefab,c=t.ProgressBar,h=t.Button,u=t.find,d=t.RigidBody2D,p=t.Vec2,g=t.instantiate,m=t.Vec3,y=t.sp,f=t.Component},function(t){w=t.default},function(t){S=t.PLAYER_STATE},function(t){C=t.default},function(t){v=t.default}],execute:function(){var b,B,P,T,k,L,M,I,A,D,N;a._RF.push({},"496aaf3mNhJ6ria5no0nrAx","SkillDown",void 0);var z=r.ccclass,R=r.property;t("default",(b=z("SkillDown"),B=R({type:s}),P=R({type:s}),T=R({type:l}),k=R({type:c}),b((I=e((M=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,o(e,"UI",I,n(e)),o(e,"target",A,n(e)),o(e,"utahaPrefab",D,n(e)),o(e,"cooldownProgressBar",N,n(e)),e.cooldownTime=10,e.cooldownTimer=0,e.spine=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.node.getComponent(h).interactable=!0,this.cooldownProgressBar.progress=0,u("Progress/Bar",this.node).active=!1,this.node.getChildByName("Cool").active=!1,this.node.getChildByName("Mask").active=!1},a.onSkillButtonClicked=function(){var t=this;w.getAudioManager().playSFX("button");var e=this.target.getComponent(v),i=this.target.getComponent(d),o=i.linearVelocity;if(e.getState()===S.RISE||e.getState()===S.FALL){w.getAudioManager().playSFX("down"),this.cooldownTimer=this.cooldownTime,e.setState(S.SKILL),i.linearVelocity=new p(0,0),i.gravityScale=0;var n=g(this.utahaPrefab);n.setPosition(new m(this.target.position.x-180,this.target.position.y,this.target.position.z)),u("Canvas/PlayCtrl").addChild(n),this.spine=n.getComponent(y.Skeleton),this.spine&&(this.spine.setAnimation(0,"action",!1),this.spine.setCompleteListener((function(){n.destroy();var a=Math.sqrt(o.x*o.x+o.y*o.y),r=Math.PI/180*30,s=new p(a*Math.cos(r),a*Math.sin(r));e.setState(S.RISE),i.linearVelocity=new p(s.x+25,-Math.abs(s.y)-10),i.gravityScale=2,t.spine=null}))),w.setSkillDownTimes()}},a.update=function(t){w.isPlaying()?(this.spine&&(this.spine.timeScale=1),this.updateSkillBtnState(),this.cooldownTimer>0&&(this.cooldownTimer-=t,this.updateCooldownProgressBar(),this.cooldownTimer<=0&&(this.cooldownTimer=0))):this.spine&&(this.spine.timeScale=0)},a.updateSkillBtnState=function(){var t=this.target.getComponent(v).getState();!this.UI.getComponent(C).getIsView()||t!==S.RISE&&t!==S.FALL?(this.node.getComponent(h).interactable=!1,u("Progress/Bar",this.node).active=!1,this.node.getChildByName("Cool").active=!1,this.node.getChildByName("Mask").active=!0):(this.node.getComponent(h).interactable=this.cooldownTimer<=0,u("Progress/Bar",this.node).active=this.cooldownTimer>0,this.node.getChildByName("Cool").active=this.cooldownTimer>0,this.node.getChildByName("Mask").active=!1)},a.updateCooldownProgressBar=function(){this.cooldownProgressBar.progress=this.cooldownTimer/this.cooldownTime},e}(f)).prototype,"UI",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(M.prototype,"target",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(M.prototype,"utahaPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(M.prototype,"cooldownProgressBar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=M))||L));a._RF.pop()}}}));

System.register("chunks:///_virtual/SkillUp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Config.ts","./UILayer.ts","./Player.ts"],(function(t){"use strict";var e,i,n,a,s,r,o,l,p,u,h,c,m,g,S,d,f,y,k,b,C,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,o=t.Node,l=t.Prefab,p=t.SpriteFrame,u=t.Sprite,h=t.Button,c=t.RigidBody2D,m=t.Vec2,g=t.instantiate,S=t.Vec3,d=t.find,f=t.sp,y=t.Component},function(t){k=t.default},function(t){b=t.PLAYER_STATE},function(t){C=t.default},function(t){v=t.default}],execute:function(){var M,T,P,B,L,I,w,x,F,A,z,R,U;s._RF.push({},"efa8fjL5dRAb4yKJPkkGqlp","SkillUp",void 0);var N=r.ccclass,V=r.property;t("default",(M=N("SkillUp"),T=V({type:o}),P=V({type:o}),B=V({type:l}),L=V({type:[p]}),I=V({type:[p]}),M((F=e((x=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,n(e,"UI",F,a(e)),n(e,"target",A,a(e)),n(e,"hibikiPrefab",z,a(e)),n(e,"skillSprites",R,a(e)),n(e,"maskSprites",U,a(e)),e.curTimes=0,e.maxTimes=3,e.spine=null,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.getComponent(u).spriteFrame=this.skillSprites[0],this.node.getChildByName("Mask").getComponent(u).spriteFrame=this.maskSprites[0],this.node.getComponent(h).interactable=!0,this.node.getChildByName("Mask").active=!1},s.onSkillButtonClicked=function(){var t=this;if(!(this.curTimes>=this.maxTimes)){k.getAudioManager().playSFX("button");var e=this.target.getComponent(v),i=this.target.getComponent(c),n=i.linearVelocity;if(e.getState()===b.RISE||e.getState()===b.FALL){k.getAudioManager().playSFX("up"),e.setState(b.SKILL),i.linearVelocity=new m(0,0),i.gravityScale=0;var a=g(this.hibikiPrefab);a.setPosition(new S(this.target.position.x-200,this.target.position.y,this.target.position.z)),d("Canvas/PlayCtrl").addChild(a),this.spine=a.getComponent(f.Skeleton),this.spine&&(this.spine.setAnimation(0,"action",!1),this.spine.setCompleteListener((function(){a.destroy();var s=Math.atan2(n.y,n.x)*(180/Math.PI),r=Math.max(30,Math.min(s+20,90)),o=Math.sqrt(n.x*n.x+n.y*n.y),l=r*(Math.PI/180),p=new m(o*Math.cos(l),o*Math.sin(l));e.setState(b.RISE),i.linearVelocity=new m(p.x+20,Math.abs(p.y)+20),i.gravityScale=2,t.spine=null}))),this.curTimes++,k.setSkillUpTimes(),this.updateSkillBtnSkin()}}},s.updateSkillBtnSkin=function(){this.skillSprites[this.curTimes]&&this.maskSprites[this.curTimes]&&(this.node.getComponent(u).spriteFrame=this.skillSprites[this.curTimes],this.node.getChildByName("Mask").getComponent(u).spriteFrame=this.maskSprites[this.curTimes])},s.update=function(t){k.isPlaying()?(this.spine&&(this.spine.timeScale=1),this.updateSkillBtnState()):this.spine&&(this.spine.timeScale=0)},s.updateSkillBtnState=function(){var t=this.target.getComponent(v).getState();!this.UI.getComponent(C).getIsView()||t!==b.RISE&&t!==b.FALL?(this.node.getComponent(h).interactable=!1,this.node.getChildByName("Mask").active=!0):(this.node.getComponent(h).interactable=this.curTimes<this.maxTimes,this.node.getChildByName("Mask").active=this.curTimes>=this.maxTimes)},e}(y)).prototype,"UI",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(x.prototype,"target",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(x.prototype,"hibikiPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(x.prototype,"skillSprites",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=e(x.prototype,"maskSprites",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=x))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/SplashController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var e,o,n,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component},function(t){s=t.default}],execute:function(){var i;o._RF.push({},"8b0797roB1Fi7mvppbwydMe","SplashController",void 0);var a=n.ccclass;t("SplashController",a("SplashController")(i=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.onLoad=function(){s.getUserActivated()&&this.node.destroy()},n.onClick=function(){s.userActivate(),s.getAudioManager().unmute(),s.getAudioManager().playMusic("main_bgm",!0),this.node.destroy()},o}(r))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/StartController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./AchvPopup.ts"],(function(t){"use strict";var e,n,o,a,r,i,u,c,s,l,p,d,g,f,h,m,y,C,v,S,A,B,F;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,s=t.Prefab,l=t.director,p=t.resources,d=t.SpriteFrame,g=t.find,f=t.Sprite,h=t.UIOpacity,m=t.tween,y=t.Tween,C=t.game,v=t.instantiate,S=t.Component,A=t.Label},function(t){B=t.default},function(t){F=t.default}],execute:function(){var k,b,M,w,P,_,x;u._RF.push({},"f26a6SW5eFIJbY+DvmGWFlD","StartController",void 0);var D=c.ccclass,I=c.property;t("StartController",(k=D("StartController"),b=I({type:s}),M=I({type:s}),k((_=e((P=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).isBackBtnClicked=!1,e.isStartBtnClicked=!1,o(e,"FAQPopup",_,a(e)),o(e,"AchvPopup",x,a(e)),e}n(e,t);var u=e.prototype;return u.start=function(){this.setAudio(),B.getAudioManager().playMusic("start_bgm",!0),this.setMaxSorce(),this.setRedDot(),l.preloadScene("game",(function(){console.log("game scene preloaded")})),window.gtag("event","Gamepage_enter")},u.setAudio=function(){B.getAudioManager().isMuted()?p.load("audio/audio_mute/spriteFrame",d,(function(t,e){g("Canvas/UILayer/TopBar/AudioBtn").getComponent(f).spriteFrame=e})):p.load("audio/audio_play/spriteFrame",d,(function(t,e){g("Canvas/UILayer/TopBar/AudioBtn").getComponent(f).spriteFrame=e}))},u.transitionOut=function(t){var e=g("Canvas/Transition").getComponent(h);e.opacity=0,m(e).to(.5,{opacity:255},{easing:"fade"}).call((function(){l.loadScene(t)})).start()},u.onClickStartButton=function(){this.isStartBtnClicked||(this.isStartBtnClicked=!0,B.getAudioManager().playSFX("button"),this.transitionOut("game"))},u.onClickAudioButton=function(t){B.getAudioManager().playSFX("button"),B.getAudioManager().isMuted()?(B.getAudioManager().unmute(),p.load("audio/audio_play/spriteFrame",d,(function(e,n){t.currentTarget.getComponent(f).spriteFrame=n}))):(B.getAudioManager().mute(),p.load("audio/audio_mute/spriteFrame",d,(function(e,n){t.currentTarget.getComponent(f).spriteFrame=n})))},u.onClickQuitButton=function(){B.getAudioManager().playSFX("button"),y.stopAll(),window.location.href="yostarsdk://webview_close",C.end()},u.onClickBackButton=function(){this.isBackBtnClicked||(this.isBackBtnClicked=!0,B.getAudioManager().playSFX("button"),this.transitionOut("scroll"))},u.onClickFAQButton=function(){B.getAudioManager().playSFX("button");var t=v(this.FAQPopup);this.node.parent.addChild(t)},u.onClickAchvButton=function(){B.getAudioManager().playSFX("button");var t=v(this.AchvPopup);t.getComponent(F).setOnClosedCallback(this.setRedDot),this.node.parent.addChild(t)},u.setMaxSorce=function(){var t=r(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getPlayerMaxScore();case 2:e=t.sent,g("Canvas/UILayer/ShowBox/Scoreboard/Score").getComponent(A).string=e.toString()+"米";case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u.setRedDot=function(){var t=r(i().mark((function t(){var e;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.getAchvDotIsShow();case 2:e=t.sent,g("Canvas/UILayer/ShowBox/Btns/EffortBtn/RedDot").active=e;case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e}(S)).prototype,"FAQPopup",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(P.prototype,"AchvPopup",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w));u._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./TaskPopup.ts"],(function(t){"use strict";var e,n,r,a,o,i,c,u,s,l,p,d,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized,o=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){c=t.cclegacy,u=t._decorator,s=t.RichText,l=t.Button,p=t.find,d=t.Component},function(t){f=t.default},function(t){h=t.default}],execute:function(){var y,g,b,k;c._RF.push({},"31995KtxXBItqGBYHNwxMqC","TaskItem",void 0);var v=u.ccclass,m=u.property;t("default",v("TaskItem")((b=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,r(e,"type",b,a(e)),r(e,"id",k,a(e)),e.onSucceedCallback=null,e}n(e,t);var c=e.prototype;return c.updateKey=function(t,e){this.type=t,this.id=e+1},c.updateText=function(t,e,n){var r="<color=#394B66>"+t+"（</color><color="+(e===n?"#394B66":"#FFA311")+">"+e+"</color><color=#394B66>/"+n+"）</color>";this.node.getChildByName("Text").getComponent(s).string=r},c.updateBtn=function(t){this.node.getChildByName("Btn").getComponent(l).interactable=1===t,p("Btn/Not",this.node).active=0===t,p("Btn/OK",this.node).active=2===t,p("Lock",this.node).active=2===t},c.onClickGetAwardButton=function(){var t=o(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.getAudioManager().playSFX("button"),t.next=3,f.getTaskAward(this.type);case 3:if(0===t.sent){t.next=6;break}return t.abrupt("return");case 6:p("Canvas/task_popup").getComponent(h).updateView(),this.onSucceedCallback&&this.onSucceedCallback(),window.gtag("event","Dailyquesthalofestival_"+this.id);case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),c.setOnSucceedCallback=function(t){this.onSucceedCallback=t},e}(d)).prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=e(g.prototype,"id",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=g))||y);c._RF.pop()}}}));

System.register("chunks:///_virtual/TaskPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./TaskItem.ts"],(function(t){"use strict";var e,n,a,o,i,r,u,c,s,l,p,d,f,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){u=t.cclegacy,c=t._decorator,s=t.Prefab,l=t.Component,p=t.find,d=t.instantiate,f=t.Button},function(t){h=t.default},function(t){g=t.default}],execute:function(){var k,m,y,C,v;u._RF.push({},"65a51MdLj5AYJSVg55nP7mS","TaskPopup",void 0);var w=c.ccclass,b=c.property;t("default",(k=w("TaskPopup"),m=b({type:s}),k((v=e((C=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,a(e,"taskItem",v,o(e)),e.onSucceedCallback=null,e}n(e,t);var u=e.prototype;return u.onLoad=function(){this.updateView()},u.start=function(){window.gtag("event","Questpage_enter")},u.updateView=function(){var t=i(r().mark((function t(){var e,n,a,o,i=this;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p("Popup/View/List",this.node).removeAllChildren(),t.next=3,h.getDailyTask();case 3:e=t.sent,n=e.dailyList,a=e.isAllFinished,p("Popup/View/Completed",this.node).active=a,p("Popup/View/Conduct",this.node).active=!a,n.forEach((function(t,e){var n=d(i.taskItem);n.getComponent(g).updateKey(t.key,e),n.getComponent(g).updateText(t.name,t.cnt,t.target),n.getComponent(g).updateBtn(t.status),p("Popup/View/List",i.node).addChild(n),n.getComponent(g).setOnSucceedCallback(i.onSucceedCallback)})),o=n.filter((function(t){return 1===t.status})).length,p("Popup/View/AllBtn",this.node).getComponent(f).interactable=o>0,p("Popup/View/AllBtn/Not",this.node).active=0===o,this.node.active=!0;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.onClickAllButton=function(){var t=i(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h.getAudioManager().playSFX("button"),t.next=3,h.getAllTaskAward();case 3:if(0===t.sent){t.next=6;break}return t.abrupt("return");case 6:this.updateView(),this.onSucceedCallback&&this.onSucceedCallback();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),u.onClickCloseButton=function(){h.getAudioManager().playSFX("button"),this.node.destroy()},u.setOnSucceedCallback=function(t){this.onSucceedCallback=t},e}(l)).prototype,"taskItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=C))||y));u._RF.pop()}}}));

System.register("chunks:///_virtual/TipPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){"use strict";var o,n,e,i,u,c,r;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,i=t.find,u=t.RichText,c=t.Component},function(t){r=t.default}],execute:function(){var p;n._RF.push({},"88a89JaKZhLybI0X38+JCxF","TipPopup",void 0);var s=e.ccclass;t("default",s("TipPopup")(p=function(t){function n(){return t.apply(this,arguments)||this}o(n,t);var e=n.prototype;return e.onLoad=function(){this.node.active=!0},e.onClickCloseButton=function(){r.getAudioManager().playSFX("button"),this.node.destroy()},e.updateTipText=function(t){i("Popup/Content",this.node).getComponent(u).string="<color=#394B66>"+t+"</color>"},n}(c))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/UILayer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./CameraController.ts"],(function(t){"use strict";var e,i,r,a,o,n,l,s,h,c,u,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,n=t._decorator,l=t.Node,s=t.Label,h=t.UITransform,c=t.View,u=t.Component},function(t){p=t.default},function(t){f=t.default}],execute:function(){var g,y,b,d,m,w,L,v,M,z,N,I,S;o._RF.push({},"b295dAePt9MdIyBmS1dGk1N","UILayer",void 0);var V=n.ccclass,x=n.property;t("default",(g=V("UILayer"),y=x(f),b=x(l),d=x(s),m=x(s),w=x(l),g((M=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,r(e,"camera",M,a(e)),r(e,"player",z,a(e)),r(e,"distanceLabel",N,a(e)),r(e,"heightLabel",I,a(e)),r(e,"followNode",S,a(e)),e.startX=0,e.startY=-200,e.playerSize=void 0,e.isView=!0,e.highestHeight=0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){this.player&&(this.startX=this.player.position.x,this.startY=this.player.position.y,this.playerSize=this.player.getComponent(h).contentSize),this.distanceLabel&&(this.distanceLabel.string="0米"),this.heightLabel&&(this.heightLabel.string="0米"),this.followNode&&(this.followNode.active=!1)},o.update=function(t){if(p.isPlaying()){var e=this.player.position,i=Math.max(0,e.x-this.startX);this.distanceLabel.string=Math.floor(i)+"米";var r=Math.max(0,e.y-this.startY);this.followNode.getChildByName("Text").getComponent(s).string=Math.floor(r)+"米",r>this.highestHeight&&(this.highestHeight=r,this.heightLabel.string=Math.floor(this.highestHeight)+"米"),p.setPlayerScore(Math.floor(i),Math.floor(this.highestHeight)),r>c.instance.getViewportRect().height*this.camera.getGMFactor()/2+this.playerSize.height*this.camera.getGMFactor()/2-this.startY?(this.followNode.active=!0,this.isView=!1):(this.followNode.active=!1,this.isView=!0)}},o.getIsView=function(){return this.isView},e}(u)).prototype,"camera",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(v.prototype,"player",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(v.prototype,"distanceLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(v.prototype,"heightLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(v.prototype,"followNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=v))||L));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});