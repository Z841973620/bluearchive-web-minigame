import{o as Y,aO as se,aI as G,a8 as q,a2 as W,aq as c,at as l,a6 as m,aR as O,U as e,aw as o,aM as N,az as g,ay as u,aQ as ae,aJ as ne,aK as re,aL as ie,av as de,E as U,aj as L,b2 as R,ax as I,aS as B,a$ as ce,a_ as le,a9 as ue,au as pe,ar as V,aX as _e,as as me,aU as M,aV as ve}from"./BXP51W1s.js";import{_ as j,g as D}from"./BQ5pHiUY.js";const fe=["data-theme","footer-type"],ge={key:0,class:"store"},ye=["href","data-type"],he=["src","alt"],Ce={key:1,class:"policy"},ke=["src"],be=["href","data-type"],we={__name:"Footer",props:{theme:{type:String,required:!1,default:"light"},bg:{type:String,required:!1,default:"white"},store:{type:Boolean,required:!1,default:!0},policy:{type:Boolean,required:!1,default:!0}},setup(b){const $=Y(),A=se(),y=G().isDesktop?"pc":"mo",k=$.lang,h=A.DATA_APP_DOWNLOAD[k],w=A.DATA_NX_POLICY[k],v=q(null),f=()=>{const i=v.value.naturalWidth*.5;v.value.setAttribute("style",`max-width: ${i}px`)},T=b;return W(()=>{var i;v.value&&((i=v.value)!=null&&i.complete)&&f()}),(i,a)=>(c(),l("div",{id:"BA_EVENT_FOOTER","data-theme":b.theme,"footer-type":e(y),style:ae({backgroundColor:b.bg})},[T.store?(c(),l("div",ge,[(c(!0),l(m,null,O(Object.keys(e(h)),s=>(c(),l("a",{href:e(h)[s].url,target:"_blank","data-type":s},8,ye))),256))])):g("",!0),T.policy?(c(),l("div",Ce,[o("img",{ref_key:"$policy",ref:v,src:("cdn"in i?i.cdn:e(N))(`/genryumon-affairs/footer/policy_${e(k)}_${b.theme}_${e(y)}.png`),alt:"blue archive footer copyright & policy links",onLoad:f},null,40,ke),(c(!0),l(m,null,O(Object.keys(e(w)),s=>(c(),l("a",{href:e(w)[s].url,target:"_blank","data-type":s},u(e(w)[s].title),9,be))),256))])):g("",!0)],12,fe))}},Te=j(we,[["__scopeId","data-v-9c690246"]]),Ae={id:"content"},Se={id:"rewards"},Le={class:"plate"},De={class:"info"},$e={class:"user"},xe={class:"user_info"},Me={class:"user_guide"},Oe={class:"user_form"},Ne={value:"",selected:"",disabled:""},Pe=["placeholder"],Ee={class:"ticket"},Ue=["data-day"],Re=["data-state","onClick"],Ie={class:"_time"},Be={class:"notice"},Ve=["src"],ze={class:"modal_body"},Ye={class:"modal_inner"},Ge=["data-type"],qe=["src"],We={class:"modal_txt"},je=["src"],Fe={class:"modal_title"},He={class:"modal_txt"},Xe=["src"],Ke="/genryumon-affairs",z="/genryumon-affairs/build",Ze={__name:"index",setup(b){const $=Y(),A=G(),n=$.lang,y=A.isDesktop,h=ne().CDN_URL+Ke,w=y?"pc":"mo",v=re(void 0,"2025-03-31T11:59:59").isAfter,f=q(null),T={ko:{title:"블루 아카이브 <현룡본색>",description:"<오욕내강> 업데이트 기념 특별 웹 미니게임 <현룡본색> 공개!"},en:{title:"Blue Archive <Genryumon Affairs>",description:"<The Senses Descend> Update Celebration: Special Web Mini Game <True Colors of the Black Dragon> Reveal!"},zh:{title:"《蔚藍檔案》「玄龍本色」",description:"《五塵降臨》更新紀念特別網頁迷你遊戲「玄龍本色」公開！"},th:{title:"Blue Archive <ตัวจริงของมังกรดำ>",description:"มินิเกมพิเศษ <ตัวจริงของมังกรดำ> ฉลองอัปเดต <จุติแห่งห้าสัมผัส>!"}};ie({title:T[n].title,description:T[n].description,image:N(`./meta_${n}.png`),url:"/genryumon-affairs"}),de({script:[{src:z+"/index.js"}]});const i={ko:{server:"서버",selectServer:"서버를 선택하세요",userCode:"회원코드 입력",wrongUserCode:"회원 코드를 정확히 입력해 주세요.",loading:"잠시만 기다려주세요.",confirm:"확인",rewardNotice:`보상은 연동된 계정의 우편함으로 지급되며,
 계정당 1회만 지급됩니다.`,receivedDate:"보상 발송일",receivedTitle:`보상이 우편함으로
지급되었습니다`,error:`오류가 발생하였습니다.
다시 시도해주세요.`,confirm:"확인"},en:{server:"Server",selectServer:"Select Server.",userCode:"Enter Member Code.",wrongUserCode:"Please enter your Member Code correctly.",loading:"Please wait a moment.",confirm:"Confirm",rewardNotice:`Rewards will be distributed once per account, 
to the mailbox of the linked account.`,receivedDate:"Sent at",receivedTitle:`Rewards have been
sent to your mailbox`,error:`An error has occurred.
Please try again.`,confirm:"confirm"},zh:{server:"Server",selectServer:"請選擇伺服器",userCode:"輸入會員編號",wrongUserCode:"請輸入正確的會員編號。",loading:"請稍候。",confirm:"選擇",rewardNotice:`獎勵將發送至連動帳號的信箱，
每個帳號僅限領取一次。`,receivedDate:"獎勵發送日",receivedTitle:"獎勵已發送到信箱",error:`發生錯誤，
請重新嘗試。`,confirm:"確認"},th:{server:"Server",selectServer:"เลือกเซิร์ฟเวอร์",userCode:"กรอกรหัสสมาชิก",wrongUserCode:"กรุณากรอกรหัสสมาชิกที่ถูกต้อง",loading:"โปรดรอสักครู่",confirm:"ตกลง",rewardNotice:`รับรางวัลได้บัญชีละ 1 ครั้ง
และรางวัลจะถูกส่งไปทางกล่องจดหมายของบัญชีที่ผูกบัญชีไว้`,receivedDate:"วันที่ส่ง",receivedTitle:`ส่งของขวัญ
ไปยังกล่องจดหมายแล้ว`,error:`พบข้อผิดพลาด
กรุณาลองใหม่อีกครั้ง`,confirm:"ตกลง"}},a=U({isLoading:!1,isModalOpen:!1,modalType:"userCode",modalTxt:""}),s=U({isLogin:!1,countryCode:"",nickname:"",userCode:"",level:0,rewardsLength:4,rewards:[]}),F=async()=>{const r="BA",t="POST",d=`/api/events/2024/event030/npa-auth/${s.countryCode}/verify`,p={headers:{"x-npa-code":s.userCode.trim()},name:"API_POST_NPA",ticket:r,path:d,method:t,withCredential:!0};return a.isLoading=!0,await M(p)},H=async()=>{const p={name:"API_EVENT34_getUserInfo",ticket:"BA",method:"GET",path:"/session-info.json",withCredential:!0};return a.isLoading=!0,await M(p)},X=async r=>{const t="BA",d="POST",p="/api/events/2025/Event034/reward",_={rewardCode:"day"+r},E={name:"API_EVENT34_getReward",ticket:t,method:d,path:p,query:_,withCredential:!0};return a.isLoading=!0,await M(E)},K=()=>{const r=n,t=r==="ko"?"kr":r==="en"?"en":r==="zh"?"tc":"th"},Z=r=>{const t=["notLogin","open","received","closed"];if(!s.isLogin)return t[0];const d=s.rewards[r-1],p=d==null?void 0:d.dtCreate;return(d==null?void 0:d.strRewardCode)===void 0?t[3]:d!=null&&d.strRewardCode&&p?t[2]:d!=null&&d.strRewardCode&&!p?t[1]:t[3]},J=r=>{const t=s==null?void 0:s.rewards[r-1];if(!s.isLogin||!t)return;const d=t==null?void 0:t.dtCreate;return P(d)},P=r=>{const t=n==="ko"?9:n==="zh"?8:n==="th"?7:0,d=n==="ko"||n==="zh"?"YY.MM.DD hh:mm A":n==="th"?"YYYY.MM.DD hh:mm A":"MM.DD.YY hh:mm A";window.BLUE_ARCHIVE_SURVIVORS.init("play",{resourceURL:"/genryumon-affairs/build/static",defaultLanguage:"tc"});let p=null;return p=ve.utc(r).add(t,"hour").format(d)+`
(UTC+`+t+")",p},Q=async()=>{if(a.isLoading){a.isLoading=!1,C(i[n].loading);return}if(!s.countryCode){a.isLoading=!1,C(i[n].selectServer);return}if(!s.userCode){a.isLoading=!1,C(i[n].wrongUserCode);return}const r=await F();if(a.isLoading=!1,console.log(r),r.status!==200){r.data.code==="failed_to_get_npacodeinfo"?C(i[n].wrongUserCode):C(i[n].error);return}x()},x=async()=>{const r=await H();if(a.isLoading=!1,r.status!==200)return;const t=r.data;s.isLogin=!0,s.countryCode=t.Server,s.nickname=t.Nickname,s.level=t.Level,s.rewards=t.Rewards},ee=async r=>{if(a.isLoading){a.isLoading=!1,C(i[n].loading);return}const t=await X(r);if(a.isLoading=!1,(t==null?void 0:t.status)!==200){C(i[n].error);return}await x();const d=s.rewards[r-1].dtCreate;oe(d)},te=()=>{a.isModalOpen=!0,a.modalType="userCode",L(()=>{D.to(f.value,{opacity:1,duration:.15})})},C=r=>{a.isModalOpen=!0,a.modalType="txt",a.modalTxt=r,L(()=>{D.to(f.value,{opacity:1,duration:.15})})},oe=r=>{a.isModalOpen=!0,a.modalType="received",a.modalTxt=`${i[n].receivedDate} : ${P(r)}`,L(()=>{D.to(f.value,{opacity:1,duration:.15})})},S=()=>{D.to(f.value,{opacity:0,duration:.3,onComplete:()=>{a.isModalOpen=!1,a.modalTxt=""}})};return W(()=>{L(()=>{x(),K()})}),(r,t)=>{const d=me,p=Te;return c(),l(m,null,[o("div",{class:_e(["event--2503-minigame",{end:e(v)}])},[o("div",Ae,[t[7]||(t[7]=R('<div id="game" data-v-74cf63b2><div class="title" data-v-74cf63b2>현룡본색</div><div class="player" data-v-74cf63b2><div class="player_canvas" data-v-74cf63b2><div id="play" data-v-74cf63b2></div></div><div class="player_frame" data-v-74cf63b2></div></div></div>',1)),o("div",Se,[o("div",Le,[o("div",De,[t[5]||(t[5]=o("div",{class:"txt"},[o("h2",{class:"txt_title"},"현룡본색 오픈 기념 이벤트"),o("span",{class:"txt_date"},"이벤트 기간: 3월 31일 월요일 오전 11시 59분까지"),o("p",{class:"txt_desc"}," 계정을 연동하고, 하루에 하나씩 오픈되는 보상을 받으세요! ")],-1)),o("div",$e,[t[4]||(t[4]=o("p",{class:"user_notice"},"계정을 연동하고, 하루에 하나씩 오픈되는 보상을 받으세요!",-1)),e(s).isLogin?(c(),l(m,{key:0},[o("div",xe,[e(y)?(c(),l(m,{key:0},[I(u(e(s).countryCode.toUpperCase())+" "+u(i[e(n)].server)+" / "+u(e(s).nickname)+" Lv. "+u(e(s).level),1)],64)):(c(),l(m,{key:1},[I(u(e(s).countryCode.toUpperCase())+" "+u(i[e(n)].server)+" ",1),o("b",null," Lv. "+u(e(s).level)+" "+u(e(s).nickname),1)],64))]),o("p",Me,[o("span",null,u(i[e(n)].rewardNotice),1)])],64)):(c(),l(m,{key:1},[o("button",{type:"button",class:"btn_code",onClick:te},"회원코드"),o("div",Oe,[B(o("select",{"onUpdate:modelValue":t[0]||(t[0]=_=>e(s).countryCode=_),required:""},[o("option",Ne,u(i[e(n)].selectServer),1),t[3]||(t[3]=R('<option value="kr" data-v-74cf63b2>Korea</option><option value="tw" data-v-74cf63b2>Taiwan / Hong Kong / Macao</option><option value="asia" data-v-74cf63b2>Asia</option><option value="na" data-v-74cf63b2>North America</option><option value="global" data-v-74cf63b2>Global</option>',5))],512),[[ce,e(s).countryCode]]),B(o("input",{"onUpdate:modelValue":t[1]||(t[1]=_=>e(s).userCode=_),maxlength:"13",type:"text",placeholder:i[e(n)].userCode,pattern:"[A-Za-z0-9]*",onInput:t[2]||(t[2]=_=>e(s).userCode=e(s).userCode.replace(/[^A-Za-z0-9]/g,""))},null,40,Pe),[[le,e(s).userCode,void 0,{trim:!0}]])]),o("button",{class:"btn_login",onClick:Q},"계정 연동하기")],64))])]),o("div",Ee,[o("ul",null,[(c(!0),l(m,null,O(e(s).rewardsLength,_=>(c(),l("li",{key:_,"data-day":_},[t[6]||(t[6]=o("div",{class:"ticket_img"},null,-1)),o("button",{type:"button",class:"ticket_btn","data-state":Z(_),onClick:E=>ee(_)},[o("span",Ie,u(J(_)),1)],8,Re)],8,Ue))),128))])])]),o("div",Be,[o("img",{src:`${h}/${e(w)}/notice_${e(n)}.png`,alt:"notice"},null,8,Ve)])]),ue(d,null,{default:pe(()=>[e(a).isModalOpen?(c(),l("div",{key:0,id:"modal",ref_key:"$modal",ref:f},[o("div",{class:"modal_dim",onClick:S}),o("div",ze,[o("div",Ye,[o("div",{class:"modal_close",onClick:S},"X"),o("div",{class:"modal_contents","data-type":e(a).modalType},[e(a).modalType==="txt"?(c(),l(m,{key:0},[o("img",{src:`${h}/pc/modal_frame.png`,alt:"modal_frame"},null,8,qe),o("p",We,u(e(a).modalTxt),1),o("button",{type:"button",class:"modal_confirm",onClick:S},u(i[e(n)].confirm),1)],64)):g("",!0),e(a).modalType==="received"?(c(),l(m,{key:1},[o("img",{src:`${h}/pc/modal_frame_title.png`,alt:"modal_frame"},null,8,je),o("h5",Fe,u(i[e(n)].receivedTitle),1),o("p",He,u(e(a).modalTxt),1),o("button",{type:"button",class:"modal_confirm",onClick:S},u(i[e(n)].confirm),1)],64)):g("",!0),e(a).modalType==="userCode"?(c(),l("img",{key:2,src:`${h}/pc/modal_code_${e(n)}.png`,alt:"modal_usercode"},null,8,Xe)):g("",!0)],8,Ge)])])],512)):g("",!0)]),_:1})]),e(y)?(c(),V(p,{key:0,theme:"dark",bg:e(v)?"transparent":"rgba(0,0,0,.5)"},null,8,["bg"])):g("",!0)],2),e(y)?g("",!0):(c(),V(p,{key:0,theme:"light",bg:"transparent"}))],64)}}},tt=j(Ze,[["__scopeId","data-v-74cf63b2"]]);export{tt as default};
