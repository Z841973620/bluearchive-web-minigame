import{_ as Q,a as ee}from"./B2YOTjsl.js";import{_ as te}from"./vlM_Cxin.js";import{aI as se,o as oe,aP as ne,aJ as ae,av as le,aL as re,E as ie,a2 as de,aj as ce,at as i,aw as o,a9 as f,au as ue,U as e,a6 as C,aV as y,as as pe,aq as d,aS as T,az as u,ay as c,aT as D,a$ as _e,a_ as ge,aX as me,ax as we,aW as ye}from"./NPLbiDue.js";import{_ as he,g as ve}from"./KtKnuUII.js";const ke=["data-state"],fe={id:"contents"},Ce=["data-state"],be={key:0,class:"bg"},Ae=["src"],xe={class:"game"},Le=["src"],Se={key:1,class:"banner"},Te={type:"button"},De={key:0,class:"section-award"},Pe={key:0,class:"award-title"},$e={class:"txt"},Ie={class:"content"},Ee={key:0,class:"award-title"},Ne={class:"user"},Me={key:0,class:"notLogined"},Oe={key:0,class:"txt"},Ue={class:"user_info"},Ve={value:"",selected:"",disabled:""},He=["placeholder"],Re=["disabled"],Be={key:1,class:"login"},Ye={class:"user_info"},We={class:"server"},ze={class:"lv"},qe={class:"code"},Fe={class:"award"},je={id:"award-list"},Ge=["src"],Xe=["onClick"],Je={key:1,class:"award-notice"},Ke=["src"],Ze=["data-type"],Qe={class:"modal-body"},et={key:0,class:"login"},tt=["src"],st={class:"today"},ot={class:"btn-cookie"},nt={for:"cookie"},at={key:1,class:"award"},lt=["src"],rt={key:2,class:"notice"},it=["src"],dt={key:3,class:"code"},ct=["src"],ut={key:4,class:"award-confirm"},pt=["src"],_t={key:0},gt={key:1},mt={key:2},wt={class:"store"},yt={class:"btn_store"},ht=["href"],vt=["href"],kt=["href"],ft=["href"],Ct={class:"footer"},bt={class:"inner"},At={class:"copy"},xt=["href"],Lt=["href"],St="./build_120d0w/index.js",Tt="./livin_on_sweets_update/build_120d0w",Dt={__name:"index",setup(Pt){const P=se(),$=oe(),b=ne(),I=ae(),a=$.lang,h=b.DATA_APP_DOWNLOAD[a],A=b.DATA_NX_POLICY[a],g=P.isDesktop,x={ko:{title:"블루 아카이브 <LIVIN’ ON SWEETS>",description:"방과후 디저트부의 리듬게임 특훈! 지금 플레이해 보세요!",image:""},en:{title:"BLUE ARCHIVE <LIVIN’ ON SWEETS>",description:"The After-School Sweets Club's Special Rhythm Training mini game! Play it now!",image:""},zh:{title:"BLUE ARCHIVE <LIVIN’ ON SWEETS>",description:"放學後的甜點部的節奏遊戲特訓！立即遊戲！",image:""},th:{title:"BLUE ARCHIVE <LIVIN’ ON SWEETS>",description:"เกมฝึกพิเศษจับจังหวะ! มาร่วมฝึกพิเศษไปด้วยกันนะคะ!",image:""}},l={ko:{login:{wait:"잠시만 기다려주세요.",server:"서버를 선택해 주세요.",code:"회원코드를 입력해 주세요.",once:"보상은 하루에 한 개만 수령하실 수 있습니다.",wrong:"회원 코드를 정확히 입력해 주세요.",dayHide:"오늘 하루 보지 않기"},txt:["이벤트 확인하기","이벤트 기간 l 11월 6일 수요일 오전 11시 59분까지","하루에 한 번! 특훈에 참여하고 보상을 받으세요!","계정을 연동한 상태로 특훈에 참여해야 보상을 획득할 수 있습니다.","회원코드","계정 연동하기","확인","보상 발송일","보상은 하루에 한 개만 수령하실 수 있습니다.","을 수령하시겠습니까?","수령하기"],award:["충전용 쿠키 x 1,000","의욕 증진 캔디 x 1,000","D-Day 달력 x 1,000","청휘석 x 1,000"]},en:{login:{wait:"Please wait a moment.",server:"Select Server.",code:"Enter Member Code.",once:"You can only claim one reward per day.",wrong:"Please enter a correct membership code.",dayHide:"Don't show again today"},txt:["View Event","Event Period: Until 11/6 (Wed) 2:59 AM (UTC)","Once a day! Finish playing the song to get rewards!","Your account must be linked to receive rewards from the special training.","Member Code","Link Account","Confirm","Sent at","You can only claim one reward per day.","Claim","Claim"],award:["Rechargeable Cookie x 1,000","Motivation Boost Candy x 1,000","D-Day Calendar x 1,000","Pyroxenes x 1,000"]},th:{login:{wait:"โปรดรอสักครู่",server:"เลือกเซิร์ฟเวอร์",code:"กรอกรหัสสมาชิก",once:"รับของขวัญได้วันละหนึ่งครั้ง",wrong:"โปรดป้อนรหัสสมาชิกที่ถูกต้อง",dayHide:"ไม่แสดงอีกวันนี้"},txt:["เข้ากิจกรรม","ระยะเวลากิจกรรม: จนถึงวันที่ 6 พ.ย. (พ) 09:59 น. (UTC+7)","เข้าฝึกซ้อมสำเร็จวันละครั้ง! แล้วรับของขวัญได้เลย!","จำเป็นต้องผูกบัญชีก่อนเข้าร่วมกิจกรรมฝึกพิเศษเพื่อรับของขวัญกิจกรรม","รหัสสมาชิก","ผูกบัญชี","ตกลง","วันที่ส่ง","รับของขวัญได้วันละหนึ่งครั้ง","ต้องการรับ","รับ","ตอนนี้หรือไม่?"],award:["คุกกี้เติมพลัง  x 1,000","แคนดี้เติมแรงใจ x 1,000","ปฏิทิน D-Day x 1,000","เพชรฟ้า x 1,000"]},zh:{login:{wait:"請稍候。",server:"選擇伺服器",code:"輸入會員編號",once:"必須以綁定的帳號參加特訓才能獲得獎勵。",wrong:"請輸入正確的會員編號。",dayHide:"今日不再顯示"},txt:["查看活動","活動期間： 至11月6日星期三上午10點59分為止","一天一次！ 完成演奏並領取獎勵吧！","必須以綁定的帳號參加特訓才能獲得獎勵。","會員編號","綁定帳號","選擇","獎勵發送日","獎勵一天只能領取一個。","是否領取","領取"],award:["充飢餅乾 x 1,000","增強幹勁糖果 x 1,000","倒數日曆 x 1,000","青輝石 x 1,000"]}};le({script:[{src:St}]}),re({title:x[a].title,description:x[a].description,image:"./meta_120d0w.jpg",url:"."});const t=ie({assets:g?"./pc":"./m",API:I.BA_API_URL,today:null,selectedAward:1,openedAwardsLength:1,openPage:!1,endEvent:!1,isLoading:!1,modal:{open:!1,type:"login"},user:{needLogin:!0,userCode:"",countryCode:"",level:null,awards:[],playingId:null,awardTime:null}}),E=()=>{N()},N=()=>{document.querySelector("#contents").classList.add("landed")},m=n=>{t.modal.open=!0,t.modal.type=n},w=({typeCookie:n=!1})=>{t.modal.open=!1,console.log("typeCookie",n),n&&document.querySelector("#cookie").checked&&O()},M=()=>{!U()&&m("login")},O=()=>{const n=new Date;n.setDate(n.getDate()+1),document.cookie=`hideModal=true; expires=${n.toUTCString()}; path=/`},U=()=>{const s=`; ${document.cookie}`.split("; hideModal=");if(s.length===2)return s.pop().split(";").shift()},V=async()=>{H(),z(),v()},H=()=>{const n=a,s=n==="ko"?"ko":n==="en"?"en":n==="zh"?"tc":"th";console.log("game loaded",s),window.BLUE_ARCHIVE_RHYTHM.init("play",{resourceURL:Tt+"/static",defaultLanguage:s,onStart:r=>{!t.user.needLogin&&X(r)},onClear:r=>{!t.user.needLogin&&J(r)},onFail:r=>{!t.user.needLogin&&K(r)}})},R=()=>{const n=new Date,s=n.getTime()+n.getTimezoneOffset()*6e4,r=new Date(s+9*36e5);t.today=r},B=()=>{new Date("2024-10-23T11:59:59+09:00")<=t.today&&t.openedAwardsLength++,new Date("2024-10-24T11:59:59+09:00")<=t.today&&t.openedAwardsLength++,new Date("2024-10-25T11:59:59+09:00")<=t.today&&t.openedAwardsLength++},Y=async()=>{const r={origin:`${t.API}/api/events/2024/event030/npa-auth/${t.user.countryCode}/verify`,headers:{"x-npa-code":t.user.userCode.trim()},name:"API_POST_NPA",ticket:"ETC",path:"",method:"POST"};return await y(r)},W=async()=>{if(t.isLoading||!t.user.countryCode||!t.user.userCode)return;t.isLoading=!0;const n=await Y();if(n.ok){const s=n.data;t.isLoading=!1,console.log(s),v()}},z=()=>{console.log("setAwardState"),document.querySelectorAll("#award-list > li").forEach((s,r)=>{const p=r+1>t.openedAwardsLength?"date":"off";s.dataset.state=p})},q=()=>{console.log("setReceivedAwardList");const n=document.querySelectorAll("#award-list > li");t.user.awards.forEach((s,r)=>{n[r].dataset.state=s.dtCreate?"done":s.isMissionCompleted?"on":"off",s.dtCreate&&(n[r].querySelector(".date").innerHTML=L(s.dtCreate))})},L=n=>{const s=a==="ko"?9:a==="zh"?8:a==="th"?7:0,r=a==="ko"||a==="zh"?"YY.MM.DD hh:mm A":a==="th"?"YYYY.MM.DD hh:mm A":"MM.DD.YY hh:mm A";let p=null;return p=ye.utc(n).add(s,"hour").format(r)+`
(UTC+`+s+")",p},F=n=>{t.selectedAward=n,m("award-confirm")},j=async n=>{const s={method:"post",url:`${t.API}/reward`,withCredentials:!0,data:{rewardCode:"mission"+n}},r=await y(s);r.ok?(res,m("award"),v(n)):console.error(r)},v=async n=>{const s={method:"get",url:`${t.API}/session-info.json`,withCredentials:!0},r=await y(s);if(r.ok){const p=res.data;t.user.needLogin=!1,t.user.level=p.Level,t.user.userCode=p.Nickname,t.user.countryCode=p.Server,t.user.awards=p.Rewards,n&&G(n),q()}else console.error(r)},G=n=>{const s=t.user.awards[n-1].dtCreate;t.user.awardTime=L(s)},X=async n=>{console.log("startStage",n);const s=n.song,r={method:"get",url:`${t.API}/start.json`,withCredentials:!0,data:{songLevel:s.level,songNo:s.no,songTitle:s.title,songWriter:s.writer,time:n.time}},p=await y(r);p.ok?(console.log("end",res),t.user.playingId=res.data.n8Id):console.error(p)},J=n=>{console.log("clearStage",n,!0),S(n,!0)},K=n=>{console.log("failStage",n,!1),S(n,!1)},S=async(n,s)=>{const r=n.song,p={method:"gt",url:`${t.API}/complete.json`,withCredentials:!0,data:{isClear:s,songLevel:r.level,songNo:r.no,songTitle:r.title,songWriter:r.writer,time:n.time,isBestScore:n.isBestScore,n4Score:n.score,isFullCombo:n.isFullCombo,isPerfect:n.isPerfect,strRank:n.rank}},k=await y(p);k.ok?(console.log("end",res),v()):console.error(k),t.user.playingId=null};return de(()=>{ce(()=>{ve.delayedCall(.5,()=>{E()}),R(),B(),V(),M()})}),(n,s)=>{const r=Q,p=te,k=pe,Z=ee;return d(),i(C,null,[o("div",{id:"wrap","data-state":e(t).openPage?"open":"close"},[f(r,{default:"off"}),f(p,{theme:"dark"}),f(k,null,{default:ue(()=>[o("div",fe,[o("section",{class:"section-game","data-state":e(t).openPage?"open":"close"},[e(g)?(d(),i("ul",be,[(d(),i(C,null,T(3,_=>o("li",{key:_},[o("img",{src:`/livin_on_sweets_update/${e(t).assets}/bg_${_-1}_new_120d0w.png`,alt:""},null,8,Ae)])),64))])):u("",!0),o("div",xe,[e(g)?u("",!0):(d(),i("img",{key:0,src:`${e(t).assets}/game_bg_${e(a)}_120d0w.png`,alt:""},null,8,Le)),s[8]||(s[8]=o("div",{class:"logo"},null,-1)),s[9]||(s[9]=o("div",{id:"play"},null,-1))]),e(g)?u("",!0):(d(),i("div",Se,[o("button",Te,c(l[e(a)].txt[0]),1)]))],8,Ce),e(t).openPage?(d(),i("section",De,[s[20]||(s[20]=o("div",{class:"bg"},null,-1)),e(g)?u("",!0):(d(),i("div",Pe,[s[10]||(s[10]=o("h2",null,null,-1)),o("div",$e,[o("h3",null,c(l[e(a)].txt[1]),1),o("h4",null,c(l[e(a)].txt[2]),1),o("p",null,c(l[e(a)].txt[3]),1)]),o("button",{type:"button",class:"btn-notice_guide",onClick:s[0]||(s[0]=_=>m("notice"))})])),o("div",Ie,[e(g)?(d(),i("div",Ee,[s[11]||(s[11]=o("h2",null,null,-1)),o("p",null,c(l[e(a)].txt[1]),1),o("button",{type:"button",class:"btn-notice_guide",onClick:s[1]||(s[1]=_=>m("notice"))})])):u("",!0),o("div",Ne,[e(t).user.needLogin?(d(),i("div",Me,[e(g)?(d(),i("div",Oe,[o("h3",null,c(l[e(a)].txt[2]),1),o("p",null,c(l[e(a)].txt[3]),1)])):u("",!0),o("button",{type:"button",class:"btn-notice_code",onClick:s[2]||(s[2]=_=>m("code"))},c(l[e(a)].txt[4]),1),o("div",Ue,[D(o("select",{"onUpdate:modelValue":s[3]||(s[3]=_=>e(t).user.countryCode=_),required:""},[o("option",Ve,c(l[e(a)].login.server),1),s[12]||(s[12]=o("option",{value:"kr"},"Korea",-1)),s[13]||(s[13]=o("option",{value:"tw"},"Taiwan / Hong Kong / Macao",-1)),s[14]||(s[14]=o("option",{value:"asia"},"Asia",-1)),s[15]||(s[15]=o("option",{value:"na"},"North America",-1)),s[16]||(s[16]=o("option",{value:"global"},"Global",-1))],512),[[_e,e(t).user.countryCode]]),D(o("input",{"onUpdate:modelValue":s[4]||(s[4]=_=>e(t).user.userCode=_),maxlength:"13",class:"code",type:"text",placeholder:l[e(a)].login.code},null,8,He),[[ge,e(t).user.userCode,void 0,{trim:!0}]])]),o("button",{class:me(["btn_check-membership",{"--loading":e(t).isLoading}]),disabled:e(t).isLoading,onClick:s[5]||(s[5]=_=>W())},c(l[e(a)].txt[5]),11,Re)])):(d(),i("div",Be,[s[17]||(s[17]=o("div",{class:"txt title"},null,-1)),o("div",Ye,[o("span",We,c(e(t).user.countryCode),1),e(g)?(d(),i(C,{key:0},[we(" /")],64)):u("",!0),o("span",ze,"Lv. "+c(e(t).user.level),1),o("span",qe,c(e(t).user.userCode),1)]),s[18]||(s[18]=o("div",{class:"txt award"},null,-1))]))]),o("div",Fe,[o("ul",je,[(d(),i(C,null,T(4,_=>o("li",{key:_},[o("img",{src:`${e(t).assets}/award-item-${_}_${e(a)}.png`,alt:""},null,8,Ge),o("button",{type:"button",onClick:$t=>F(_)},s[19]||(s[19]=[o("span",{class:"date"},null,-1)]),8,Xe)])),64))])])]),e(g)?u("",!0):(d(),i("div",Je,[o("img",{src:`${e(t).assets}/notice-${e(a)}.png`,alt:""},null,8,Ke)]))])):u("",!0)]),e(t).modal.open&&e(t).openPage?(d(),i("div",{key:0,id:"modal","data-type":e(t).modal.type},[o("div",{class:"modal-dim",onClick:w}),o("div",Qe,[o("div",{class:"modal-close",onClick:w}),e(t).modal.type=="login"?(d(),i("div",et,[e(g)?u("",!0):(d(),i("img",{key:0,src:`${e(t).assets}/modal-login_${e(a)}.png`,alt:""},null,8,tt)),o("div",st,[o("button",{type:"button",class:"btn-confirm",onClick:s[6]||(s[6]=()=>w({typeCookie:!0}))},c(l[e(a)].txt[6]),1),o("div",ot,[s[21]||(s[21]=o("input",{id:"cookie",type:"checkbox"},null,-1)),o("label",nt,c(l[e(a)].login.dayHide),1)])])])):u("",!0),e(t).modal.type=="award"?(d(),i("div",at,[e(g)?u("",!0):(d(),i("img",{key:0,src:`${e(t).assets}/modal-award_${e(a)}.png`,alt:""},null,8,lt)),o("span",null,c(l[e(a)].txt[7])+" : "+c(e(t).user.awardTime),1),o("button",{type:"button",class:"btn-confirm",onClick:w},c(l[e(a)].txt[6]),1)])):u("",!0),e(t).modal.type=="notice"?(d(),i("div",rt,[e(g)?u("",!0):(d(),i("img",{key:0,src:`${e(t).assets}/modal-notice_${e(a)}.png`,alt:""},null,8,it)),o("button",{type:"button",class:"btn-close",onClick:w},c(l[e(a)].txt[6]),1)])):u("",!0),e(t).modal.type=="code"?(d(),i("div",dt,[e(g)?u("",!0):(d(),i("img",{key:0,src:`${e(t).assets}/modal-code_${e(a)}.png`,alt:""},null,8,ct))])):u("",!0),e(t).modal.type=="award-confirm"?(d(),i("div",ut,[e(g)?u("",!0):(d(),i("img",{key:0,src:`${e(t).assets}/modal-award-confirm_${e(a)}.png`,alt:""},null,8,pt)),o("p",null,[o("span",null,c(l[e(a)].txt[8]),1),e(a)=="ko"?(d(),i("span",_t,"["+c(e(t).selectedAward==1?l[e(a)][n.award][0]:e(t).selectedAward==2?l[e(a)][n.award][1]:e(t).selectedAward==3?l[e(a)][n.award][2]:l[e(a)][n.award][3])+"] "+c(l[e(a)].txt[9]),1)):u("",!0),e(a)=="en"||e(a)=="zh"?(d(),i("span",gt,c(l[e(a)].txt[9])+" ["+c(e(t).selectedAward==1?l[e(a)][n.award][0]:e(t).selectedAward==2?l[e(a)][n.award][1]:e(t).selectedAward==3?l[e(a)][n.award][2]:l[e(a)][n.award][3])+"] ?",1)):u("",!0),e(a)=="th"?(d(),i("span",mt,c(l[e(a)].txt[9])+" ["+c(e(t).selectedAward==1?l[e(a)][n.award][0]:e(t).selectedAward==2?l[e(a)][n.award][1]:e(t).selectedAward==3?l[e(a)][n.award][2]:l[e(a)][n.award][3])+"] "+c(l[e(a)].txt[11]),1)):u("",!0)]),o("button",{type:"button",class:"btn-close",onClick:w}),o("button",{type:"button",class:"btn-confirm",onClick:s[7]||(s[7]=_=>j(e(t).selectedAward))},c(l[e(a)].txt[10]),1)])):u("",!0)])],8,Ze)):u("",!0),o(),o()]),_:1})],8,ke),f(Z)],64)}}},Ot=he(Dt,[["__scopeId","data-v-ee75d72d"]]);export{Ot as default};
